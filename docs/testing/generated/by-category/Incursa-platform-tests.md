# Incursa.Platform.Tests

Total tests: 626

- **Incursa.Platform.InMemory.Tests:Incursa.Platform.Tests.InMemoryInboxTimeBehaviorTests.ClaimAsync_RespectsFakeTimeProvider**
  - Summary: When claim Async Respects Fake Time Provider, then it behaves as expected.
  - Intent: Document expected behavior for claim Async Respects Fake Time Provider.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.InMemory.Tests/InMemoryInboxTimeBehaviorTests.cs#L30](tests/Incursa.Platform.InMemory.Tests/InMemoryInboxTimeBehaviorTests.cs#L30)
- **Incursa.Platform.InMemory.Tests:Incursa.Platform.Tests.InMemoryOutboxTimeBehaviorTests.ClaimDueAsync_RespectsFakeTimeProvider**
  - Summary: When claim Due Async Respects Fake Time Provider, then it behaves as expected.
  - Intent: Document expected behavior for claim Due Async Respects Fake Time Provider.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.InMemory.Tests/InMemoryOutboxTimeBehaviorTests.cs#L30](tests/Incursa.Platform.InMemory.Tests/InMemoryOutboxTimeBehaviorTests.cs#L30)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.ControlPlaneSchemaBundleTests.ControlPlaneBundle_AddsControlPlaneSchema_OnTopOfTenantBundle**
  - Summary: When control Plane Bundle Adds Control Plane Schema On Top Of Tenant Bundle, then it behaves as expected.
  - Intent: Document expected behavior for control Plane Bundle Adds Control Plane Schema On Top Of Tenant Bundle.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/ControlPlaneSchemaBundleTests.cs#L70](tests/Incursa.Platform.Postgres.Tests/ControlPlaneSchemaBundleTests.cs#L70)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.ControlPlaneSchemaBundleTests.TenantBundle_CreatesFanoutTables**
  - Summary: When tenant Bundle Creates Fanout Tables, then it behaves as expected.
  - Intent: Document expected behavior for tenant Bundle Creates Fanout Tables.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/ControlPlaneSchemaBundleTests.cs#L55](tests/Incursa.Platform.Postgres.Tests/ControlPlaneSchemaBundleTests.cs#L55)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.ControlPlaneSchemaBundleTests.TenantBundle_DoesNotInclude_ControlPlaneSchema**
  - Summary: When tenant Bundle Does Not Include Control Plane Schema, then it behaves as expected.
  - Intent: Document expected behavior for tenant Bundle Does Not Include Control Plane Schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/ControlPlaneSchemaBundleTests.cs#L37](tests/Incursa.Platform.Postgres.Tests/ControlPlaneSchemaBundleTests.cs#L37)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureDistributedLockSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the distributed lock schema is ensured with a custom schema, then the table is created there.
  - Intent: Verify distributed lock deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L49](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L49)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureFanoutSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the fanout schema is ensured with a custom schema, then policy and cursor tables are created there.
  - Intent: Verify fanout deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L260](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L260)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureInboxSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the inbox schema is ensured with a custom schema, then the Inbox table is created there.
  - Intent: Verify inbox deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L133](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L133)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureInboxWorkQueueSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the inbox work-queue schema is ensured with a custom schema, then inbox objects are created there.
  - Intent: Verify inbox work-queue deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L229](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L229)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureLeaseSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the lease schema is ensured with a custom schema, then the lease table is created there.
  - Intent: Verify lease deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L76](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L76)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureOutboxSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the outbox schema is ensured with a custom schema, then outbox tables are created there.
  - Intent: Verify outbox deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L103](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L103)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureSchedulerSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the scheduler schema is ensured with a custom schema, then scheduler tables are created there.
  - Intent: Verify scheduler deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L160](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L160)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureWorkQueueSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the work-queue schema is ensured with a custom schema, then work-queue objects use that schema.
  - Intent: Verify work-queue deployment honors the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L198](tests/Incursa.Platform.Postgres.Tests/CustomSchemaIntegrationTests.cs#L198)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.CustomSchemaNames_WorkCorrectly**
  - Summary: When creating scheduler tables in a custom schema, then tables and indexes use the custom names.
  - Intent: Verify scheduler schema respects custom schema and table names.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L319](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L319)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.DatabaseSchema_AllRequiredTablesExist**
  - Summary: Given core schemas are deployed, then all required tables exist.
  - Intent: Verify core schema deployment creates the expected tables.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L59](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L59)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.DatabaseSchema_RequiredIndexesExist**
  - Summary: When verifying schema indexes, then required work-queue and uniqueness indexes exist.
  - Intent: Validate required indexes are created for core tables.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L284](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L284)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.InboxTable_HasCorrectSchema**
  - Summary: When inspecting the Inbox table, then all required columns and types match.
  - Intent: Validate the Inbox table shape matches the expected schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L250](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L250)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.JobRunsTable_HasCorrectSchema**
  - Summary: When inspecting the JobRuns table, then all required columns and types match.
  - Intent: Validate the JobRuns table shape matches the expected schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L216](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L216)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.JobsTable_HasCorrectSchema**
  - Summary: When inspecting the Jobs table, then all required columns and types match.
  - Intent: Validate the Jobs table shape matches the expected schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L152](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L152)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.OutboxTable_HasCorrectSchema**
  - Summary: When inspecting the Outbox table, then all required columns and types match.
  - Intent: Validate the Outbox table shape matches the expected schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L117](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L117)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.TimersTable_HasCorrectSchema**
  - Summary: When inspecting the Timers table, then all required columns and types match.
  - Intent: Validate the Timers table shape matches the expected schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L181](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L181)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.WorkQueueColumns_ExistAfterMigration**
  - Summary: When checking the Outbox table after work-queue migration, then work-queue columns exist.
  - Intent: Confirm work-queue columns are present after migration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L351](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaConsistencyTests.cs#L351)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddPostgresOutbox_WithSchemaDeploymentDisabled_DoesNotRegisterSchemaService**
  - Summary: When schema deployment is disabled, then Postgres outbox does not register schema services.
  - Intent: Validate service registration is skipped when schema deployment is off.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L52](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L52)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddPostgresOutbox_WithSchemaDeploymentEnabled_RegistersSchemaService**
  - Summary: When schema deployment is enabled, then Postgres outbox registers schema completion and background services.
  - Intent: Validate service registration for the outbox schema deployment path.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L29](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L29)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddPostgresPlatformMultiDatabaseWithControlPlaneAndList_WithSchemaDeploymentEnabled_RegistersSchemaService**
  - Summary: When control-plane schema deployment is enabled, then schema services are registered.
  - Intent: Confirm control-plane multi-database registration wires schema deployment services.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L154](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L154)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddPostgresPlatformMultiDatabaseWithList_WithSchemaDeploymentDisabled_DoesNotRegisterSchemaService**
  - Summary: When list-based schema deployment is disabled, then schema services are not registered.
  - Intent: Confirm list-based multi-database registration skips schema deployment services.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L190](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L190)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddPostgresPlatformMultiDatabaseWithList_WithSchemaDeploymentEnabled_RegistersSchemaService**
  - Summary: When list-based multi-database schema deployment is enabled, then schema services are registered.
  - Intent: Confirm list-based multi-database registration wires schema deployment services.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L125](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L125)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.DatabaseSchemaCompletion_CoordinatesStateCorrectly**
  - Summary: When SetCompleted is called, then SchemaDeploymentCompleted finishes successfully.
  - Intent: Verify schema completion signaling transitions the task to a completed state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L108](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L108)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.SchemaCompletion_RegisteredSeparatelyFromBackgroundService**
  - Summary: When schema deployment is enabled, then schema completion is registered separately from the background service.
  - Intent: Ensure completion services are singletons independent of the hosted service registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L75](tests/Incursa.Platform.Postgres.Tests/DatabaseSchemaDeploymentTests.cs#L75)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.FanoutSlices_CanJoinDownstreamMessagesIdempotently**
  - Summary: When fanout slices are joined, then completed steps are idempotent and correlation ids remain consistent.
  - Intent: Verify join-store idempotency for downstream fan-in tracking.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L201](tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L201)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.RunAsync_RedispatchesAbandonedSlices**
  - Summary: When slices are abandoned, then subsequent runs redispatch them.
  - Intent: Verify abandoned slices are eligible for redispatch.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L130](tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L130)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.RunAsync_RespectsActiveLeaseAndRecoversAfterExpiry**
  - Summary: When a lease is already held, then the coordinator skips dispatch until the lease expires.
  - Intent: Verify lease gating and recovery behavior for fanout coordination.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L93](tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L93)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.RunAsync_SkipsCompletedSlicesAfterCursorAdvances**
  - Summary: When cursors are marked completed, then subsequent runs skip those slices.
  - Intent: Verify cursor advancement prevents redispatch of completed slices.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L164](tests/Incursa.Platform.Postgres.Tests/FanoutCoordinatorIntegrationTests.cs#L164)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.GlobalControlPlaneRoutingTests.GlobalAliases_RouteToControlPlane**
  - Summary: When global Aliases Route To Control Plane, then it behaves as expected.
  - Intent: Document expected behavior for global Aliases Route To Control Plane.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/GlobalControlPlaneRoutingTests.cs#L39](tests/Incursa.Platform.Postgres.Tests/GlobalControlPlaneRoutingTests.cs#L39)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxCleanupTests.CleanupService_GracefullyHandles_MissingTable**
  - Summary: When the inbox table is missing, then the cleanup service runs without recreating it.
  - Intent: Verify cleanup handles missing tables without side effects.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L249](tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L249)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxCleanupTests.Cleanup_DeletesOldProcessedMessages**
  - Summary: When cleanup runs with a seven-day retention period, then only old processed messages are deleted.
  - Intent: Verify cleanup deletes processed rows older than the retention window.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L55](tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L55)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxCleanupTests.Cleanup_RespectsRetentionPeriod**
  - Summary: When cleanup uses a 10-day retention period, then only messages older than 10 days are deleted.
  - Intent: Verify cleanup uses the retention cutoff to select deletions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L185](tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L185)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxCleanupTests.Cleanup_WithNoOldMessages_DeletesNothing**
  - Summary: Given only recent processed messages, then cleanup deletes nothing.
  - Intent: Verify cleanup leaves processed rows inside the retention window.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L137](tests/Incursa.Platform.Postgres.Tests/InboxCleanupTests.cs#L137)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_RotatesOwnerTokensAcrossRuns**
  - Summary: When RunOnceAsync executes across multiple runs, then owner tokens rotate between runs.
  - Intent: Verify each dispatch run uses a new owner token.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L288](tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L288)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithFailingHandler_AbandonsWithBackoffPolicy**
  - Summary: When a handler fails and a backoff policy is configured, then the message is abandoned with that delay.
  - Intent: Verify backoff delays are applied during abandon.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L208](tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L208)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithFailingHandler_RetriesWithBackoff**
  - Summary: When a handler throws, then RunOnceAsync abandons the message back to Seen.
  - Intent: Verify handler failures result in a retryable abandon.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L166](tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L166)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithNoHandlerForTopic_MarksMessageAsDead**
  - Summary: When no handler exists for a message topic, then RunOnceAsync marks the message Dead.
  - Intent: Verify missing handlers move the message to Dead.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L125](tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L125)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithNoMessages_ReturnsZero**
  - Summary: Given no inbox messages, then RunOnceAsync returns 0 processed items.
  - Intent: Verify the dispatcher reports zero when no work is available.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L57](tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L57)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithPoisonMessage_FailsInsteadOfRetrying**
  - Summary: When a message exceeds max attempts, then RunOnceAsync fails it instead of retrying.
  - Intent: Verify poison messages are failed once they exceed the retry limit.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L248](tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L248)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithValidMessage_ProcessesSuccessfully**
  - Summary: When a queued message has a matching handler, then RunOnceAsync processes it and marks it Done.
  - Intent: Verify successful dispatch updates the inbox status to Done.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L84](tests/Incursa.Platform.Postgres.Tests/InboxDispatcherTests.cs#L84)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxIntegrationTests.CompleteInboxWorkflow_DirectServiceUsage_WorksEndToEnd**
  - Summary: Given a direct inbox workflow, then AlreadyProcessed transitions from false to true and the row is Done.
  - Intent: Verify end-to-end inbox processing with direct PostgresInboxService usage.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxIntegrationTests.cs#L48](tests/Incursa.Platform.Postgres.Tests/InboxIntegrationTests.cs#L48)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxIntegrationTests.ConcurrentAccess_WithMultipleThreads_HandledSafely**
  - Summary: When multiple threads call AlreadyProcessedAsync concurrently, then one row is created with attempts tracked.
  - Intent: Verify concurrent deduplication records a single row and increments Attempts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxIntegrationTests.cs#L138](tests/Incursa.Platform.Postgres.Tests/InboxIntegrationTests.cs#L138)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxIntegrationTests.PoisonMessageWorkflow_MarkingAsDead_WorksCorrectly**
  - Summary: When a message is marked dead after processing starts, then its status is Dead and ProcessedUtc stays null.
  - Intent: Verify poison-message handling in the inbox workflow.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxIntegrationTests.cs#L96](tests/Incursa.Platform.Postgres.Tests/InboxIntegrationTests.cs#L96)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.AbandonAsync_WithClaimedMessage_ReturnsToSeen**
  - Summary: When abandoning a claimed message, then its status returns to Seen.
  - Intent: Verify abandon releases the claim and resets the status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L182](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L182)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.AckAsync_WithClaimedMessage_MarksAsDone**
  - Summary: When acknowledging a claimed message, then its status becomes Done.
  - Intent: Verify acknowledgements finalize the inbox row.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L145](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L145)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.ClaimAsync_WithAvailableMessage_ClaimsSuccessfully**
  - Summary: When a message is available, then ClaimAsync claims it and marks it Processing.
  - Intent: Verify claims update inbox status and ownership.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L77](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L77)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.ClaimAsync_WithConcurrentWorkers_EnsuresExclusiveClaims**
  - Summary: When two workers claim concurrently, then only one receives the message.
  - Intent: Verify claim exclusivity under concurrent workers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L114](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L114)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.ClaimAsync_WithNoMessages_ReturnsEmpty**
  - Summary: Given an empty inbox, then ClaimAsync returns no message ids.
  - Intent: Verify claim behavior when no work is available.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L54](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L54)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.FailAsync_WithClaimedMessage_MarksAsDead**
  - Summary: When failing a claimed message, then its status becomes Dead.
  - Intent: Verify failure handling marks the message as Dead.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L218](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L218)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.GetAsync_WithInvalidMessageId_ThrowsException**
  - Summary: When requesting a missing message id, then GetAsync throws InvalidOperationException.
  - Intent: Verify missing messages raise an exception.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L321](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L321)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.GetAsync_WithValidMessageId_ReturnsMessage**
  - Summary: Given a valid message id, then GetAsync returns the stored inbox message.
  - Intent: Verify message retrieval by id returns stored fields.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L291](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L291)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.OwnerTokenEnforcement_OnlyAllowsOperationsByOwner**
  - Summary: When a non-owner attempts to acknowledge a claim, then the row remains Processing.
  - Intent: Verify owner token enforcement for state transitions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L254](tests/Incursa.Platform.Postgres.Tests/InboxWorkStoreTests.cs#L254)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenAllStepsCompleted_MarksJoinAsCompleted**
  - Summary: When all join steps are completed, then the join remains in a completed state.
  - Intent: Confirm the wait handler leaves a completed join unchanged.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/JoinWaitHandlerTests.cs#L123](tests/Incursa.Platform.Postgres.Tests/JoinWaitHandlerTests.cs#L123)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenAnyStepFailed_MarksJoinFailed**
  - Summary: When any join step fails and failure propagation is enabled, then the join is marked failed.
  - Intent: Validate failure propagation for join steps.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/JoinWaitHandlerTests.cs#L168](tests/Incursa.Platform.Postgres.Tests/JoinWaitHandlerTests.cs#L168)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenJoinNotReady_ThrowsJoinNotReadyException**
  - Summary: When the join has incomplete steps, then the handler throws JoinNotReadyException.
  - Intent: Validate that the wait handler blocks until the join is complete.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/JoinWaitHandlerTests.cs#L87](tests/Incursa.Platform.Postgres.Tests/JoinWaitHandlerTests.cs#L87)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.LeaseTests.AcquireAsync_WithExpiredLease_SucceedsAndReturnsNewExpiry**
  - Summary: When a lease has expired, then a new owner can acquire it and receives a new expiry.
  - Intent: Verify acquisition succeeds after lease expiration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L120](tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L120)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.LeaseTests.AcquireAsync_WithFreeResource_SucceedsAndReturnsServerTime**
  - Summary: When acquiring a free lease, then the acquisition succeeds and returns server time and expiry.
  - Intent: Verify acquisition succeeds for an unused lease name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L52](tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L52)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.LeaseTests.AcquireAsync_WithOccupiedResource_FailsAndReturnsServerTime**
  - Summary: When acquiring an already-held lease, then the acquisition fails and returns server time.
  - Intent: Verify acquisition fails for an occupied lease.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L86](tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L86)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.LeaseTests.RenewAsync_WithExpiredLease_FailsAndReturnsServerTime**
  - Summary: When renewing after the lease expires, then the renewal fails and returns no expiry.
  - Intent: Verify renewal fails for an expired lease.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L230](tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L230)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.LeaseTests.RenewAsync_WithValidOwner_SucceedsAndExtendsLease**
  - Summary: When renewing with the current owner, then the lease is extended.
  - Intent: Verify renewal succeeds for the lease holder.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L158](tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L158)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.LeaseTests.RenewAsync_WithWrongOwner_FailsAndReturnsServerTime**
  - Summary: When renewing with a different owner, then the renewal fails and no expiry is returned.
  - Intent: Verify renewal fails for a non-owner.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L196](tests/Incursa.Platform.Postgres.Tests/LeaseTests.cs#L196)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MetricsSchemaTests.MetricDef_Table_Should_Exist**
  - Summary: Given the metrics schema is deployed, then the MetricDef table exists.
  - Intent: Verify MetricDef is created by the metrics schema deployment.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MetricsSchemaTests.cs#L52](tests/Incursa.Platform.Postgres.Tests/MetricsSchemaTests.cs#L52)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MetricsSchemaTests.MetricPointMinute_Table_Should_Exist**
  - Summary: Given the metrics schema is deployed, then the MetricPointMinute table exists.
  - Intent: Verify MetricPointMinute is created by the metrics schema deployment.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MetricsSchemaTests.cs#L100](tests/Incursa.Platform.Postgres.Tests/MetricsSchemaTests.cs#L100)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MetricsSchemaTests.MetricSeries_Table_Should_Exist**
  - Summary: Given the metrics schema is deployed, then the MetricSeries table exists.
  - Intent: Verify MetricSeries is created by the metrics schema deployment.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MetricsSchemaTests.cs#L76](tests/Incursa.Platform.Postgres.Tests/MetricsSchemaTests.cs#L76)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.ListRegistration_WiresControlPlaneAndDiscoversDatabases**
  - Summary: Given list-based registration, then control-plane configuration and tenant discovery are wired correctly.
  - Intent: Verify list-based registration wires control-plane settings and discovery outputs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L57](tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L57)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_Discovery_MultipleTenants**
  - Summary: When dispatching for multiple discovery-registered tenants, then each tenant message is processed.
  - Intent: Verify multi-tenant outbox dispatch with discovery-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L175](tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L175)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_Discovery_SingleTenant**
  - Summary: When dispatching for a single discovery-registered tenant, then its message is processed.
  - Intent: Verify single-tenant outbox dispatch with discovery-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L213](tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L213)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_List_MultipleTenants**
  - Summary: When dispatching for multiple list-registered tenants, then each tenant message is processed.
  - Intent: Verify multi-tenant outbox dispatch with list-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L101](tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L101)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_List_SingleTenant**
  - Summary: When dispatching for a single list-registered tenant, then its message is processed.
  - Intent: Verify single-tenant outbox dispatch with list-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L140](tests/Incursa.Platform.Postgres.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L140)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiInboxDispatcherLeaseTests.MultiInboxDispatcher_WithLease_PreventsConcurrentProcessing**
  - Summary: When two dispatchers share a lease router, then only one processes the inbox batch.
  - Intent: Verify lease-based coordination prevents concurrent processing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiInboxDispatcherLeaseTests.cs#L52](tests/Incursa.Platform.Postgres.Tests/MultiInboxDispatcherLeaseTests.cs#L52)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiInboxDispatcherLeaseTests.MultiInboxDispatcher_WithoutLease_AllowsProcessing**
  - Summary: When no lease router is configured, then the dispatcher processes all available messages.
  - Intent: Verify processing continues without lease coordination.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiInboxDispatcherLeaseTests.cs#L176](tests/Incursa.Platform.Postgres.Tests/MultiInboxDispatcherLeaseTests.cs#L176)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherLeaseTests.MultiOutboxDispatcher_WithLease_PreventsConcurrentProcessing**
  - Summary: When two dispatchers share a lease router, then only one processes the outbox batch.
  - Intent: Verify lease-based coordination prevents concurrent processing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherLeaseTests.cs#L44](tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherLeaseTests.cs#L44)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherLeaseTests.MultiOutboxDispatcher_WithoutLease_AllowsProcessing**
  - Summary: When no lease router is configured, then the dispatcher processes all available messages.
  - Intent: Verify dispatch proceeds without lease coordination.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherLeaseTests.cs#L160](tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherLeaseTests.cs#L160)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherTests.MultiOutboxDispatcher_ProcessesMessagesFromMultipleStores**
  - Summary: When dispatching across multiple stores, then messages are processed from each store.
  - Intent: Verify the dispatcher iterates across store providers and handles messages from each.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherTests.cs#L42](tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherTests.cs#L42)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherTests.MultiOutboxDispatcher_WithDrainFirstStrategy_DrainsOneStoreBeforeMoving**
  - Summary: When using the drain-first strategy, then one store is drained before moving on.
  - Intent: Verify the drain-first selection strategy exhausts one store before switching.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherTests.cs#L159](tests/Incursa.Platform.Postgres.Tests/MultiOutboxDispatcherTests.cs#L159)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxCleanupTests.CleanupService_GracefullyHandles_MissingTable**
  - Summary: When the outbox table is missing, then the cleanup service runs without recreating it.
  - Intent: Verify cleanup handles missing tables without side effects.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L228](tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L228)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxCleanupTests.Cleanup_DeletesOldProcessedMessages**
  - Summary: When cleanup runs with a seven-day retention period, then only old processed messages are deleted.
  - Intent: Verify cleanup removes processed rows older than the retention window.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L48](tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L48)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxCleanupTests.Cleanup_RespectsRetentionPeriod**
  - Summary: When cleanup uses a 10-day retention period, then only messages older than 10 days are deleted.
  - Intent: Verify retention cutoffs are respected during cleanup.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L170](tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L170)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxCleanupTests.Cleanup_WithNoOldMessages_DeletesNothing**
  - Summary: When only recent processed messages exist, then cleanup deletes nothing.
  - Intent: Verify cleanup does not remove rows inside the retention window.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L128](tests/Incursa.Platform.Postgres.Tests/OutboxCleanupTests.cs#L128)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxExtensionsTests.EnqueueJoinWaitAsync_WithAllParameters_EnqueuesCorrectMessage**
  - Summary: When EnqueueJoinWaitAsync is called with full parameters, then the join.wait message contains them.
  - Intent: Verify join-wait payload fields are populated from all provided parameters.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxExtensionsTests.cs#L68](tests/Incursa.Platform.Postgres.Tests/OutboxExtensionsTests.cs#L68)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxExtensionsTests.EnqueueJoinWaitAsync_WithMinimalParameters_EnqueuesCorrectMessage**
  - Summary: When EnqueueJoinWaitAsync is called with minimal parameters, then optional fields remain null.
  - Intent: Verify defaults are applied when optional join-wait parameters are omitted.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxExtensionsTests.cs#L107](tests/Incursa.Platform.Postgres.Tests/OutboxExtensionsTests.cs#L107)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_DefaultBackoff_ExponentialWithJitter**
  - Summary: When computing default backoff delays, then ranges grow exponentially with jitter and remain bounded.
  - Intent: Verify the default backoff timing policy and caps.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L484](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L484)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_HandlerThrows_ReschedulesWithBackoff**
  - Summary: When a handler throws and attempts remain, then RunOnceAsync reschedules with backoff.
  - Intent: Verify handler exceptions reschedule messages with delay.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L217](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L217)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_LogsAtCorrectLevels**
  - Summary: When processing a mix of success and missing-handler messages, then logs include info, debug, and warning entries.
  - Intent: Verify log levels reflect batch, message, and missing-handler outcomes.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L401](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L401)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_LogsCorrectly**
  - Summary: When a message is processed successfully, then the handler and store record dispatch.
  - Intent: Verify the success path invokes handlers and records dispatch.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L311](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L311)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_LogsErrors_WhenHandlerFails**
  - Summary: When a handler fails, then the dispatcher captures the error and reschedules the message.
  - Intent: Verify handler failures produce reschedule entries with errors.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L356](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L356)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_NoHandler_MarksAsFailed**
  - Summary: When a message has no registered handler, then RunOnceAsync marks it failed.
  - Intent: Verify missing handlers cause failures with the correct error.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L176](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L176)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_ProcessSingleMessage_Success**
  - Summary: When a message has a matching handler, then RunOnceAsync dispatches it and returns 1.
  - Intent: Verify successful single-message dispatch through the handler.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L133](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L133)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_WithPoisonMessage_FailsWhenMaxAttemptsReached**
  - Summary: When a failing message reaches the max attempts threshold, then it is marked failed.
  - Intent: Verify poison messages fail once the retry limit is reached.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L264](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L264)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.OutboxHandlerResolver_CaseInsensitive**
  - Summary: When resolving with different casing, then the handler is still found.
  - Intent: Verify case-insensitive topic lookup in the resolver.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L106](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L106)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.OutboxHandlerResolver_WithHandlers_ResolvesCorrectly**
  - Summary: Given a resolver with multiple handlers, then known topics resolve and unknown topics do not.
  - Intent: Verify resolver matching for known and unknown topics.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L71](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L71)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.ServiceCollection_AddOutboxHandler_Factory_RegistersHandler**
  - Summary: When adding an outbox handler factory, then it is registered as a singleton IOutboxHandler.
  - Intent: Verify handler factory registration uses singleton lifetime.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L551](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L551)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxHandlerTests.ServiceCollection_AddOutboxHandler_RegistersHandler**
  - Summary: When adding an outbox handler type, then it is registered as a singleton IOutboxHandler.
  - Intent: Verify handler type registration uses singleton lifetime.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L522](tests/Incursa.Platform.Postgres.Tests/OutboxHandlerTests.cs#L522)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.AttachMessageToJoinAsync_CalledTwice_IsIdempotent**
  - Summary: When attaching the same message twice, then only one association exists.
  - Intent: Verify AttachMessageToJoinAsync is idempotent.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L187](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L187)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.AttachMessageToJoinAsync_WithValidIds_CreatesAssociation**
  - Summary: When attaching a message to a join, then the association is stored.
  - Intent: Verify join member rows are created for attached messages.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L154](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L154)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.CompleteJoinWorkflow_WithAllStepsCompleted_WorksCorrectly**
  - Summary: When all steps complete, then the join reports completed status and counts.
  - Intent: Verify the full join workflow records completion for every step.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L340](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L340)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.CompleteJoinWorkflow_WithSomeStepsFailed_WorksCorrectly**
  - Summary: When some steps fail, then the join reports failed status and counts.
  - Intent: Verify the join workflow records failures alongside completions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L384](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L384)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.CreateJoinAsync_WithValidParameters_CreatesJoin**
  - Summary: When CreateJoinAsync is called with valid parameters, then a pending join is created.
  - Intent: Verify join creation populates expected metadata and counters.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L86](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L86)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.GetJoinAsync_WithExistingJoin_ReturnsJoin**
  - Summary: When retrieving an existing join, then GetJoinAsync returns it.
  - Intent: Verify joins can be fetched by id.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L116](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L116)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.GetJoinAsync_WithNonExistentJoin_ReturnsNull**
  - Summary: When retrieving a non-existent join, then GetJoinAsync returns null.
  - Intent: Verify unknown join ids are handled gracefully.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L138](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L138)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.GetJoinMessagesAsync_WithMultipleMessages_ReturnsAllMessageIds**
  - Summary: When a join has multiple attached messages, then GetJoinMessagesAsync returns all ids.
  - Intent: Verify join message enumeration returns every attached message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L309](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L309)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementCompletedAsync_CalledTwiceForSameMessage_IsIdempotent**
  - Summary: When IncrementCompletedAsync is called twice for the same message, then counts are not duplicated.
  - Intent: Verify completion increments are idempotent per message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L422](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L422)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementCompletedAsync_WhenTotalWouldExceedExpected_DoesNotOverCount**
  - Summary: When completed steps would exceed expected, then counts do not overrun expected steps.
  - Intent: Verify completion counting is capped at ExpectedSteps.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L472](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L472)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementCompletedAsync_WithValidMessage_IncrementsCount**
  - Summary: When incrementing completion for an attached message, then CompletedSteps increases.
  - Intent: Verify completion updates counters and timestamps.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L225](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L225)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementFailedAsync_CalledTwiceForSameMessage_IsIdempotent**
  - Summary: When IncrementFailedAsync is called twice for the same message, then counts are not duplicated.
  - Intent: Verify failure increments are idempotent per message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L447](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L447)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementFailedAsync_WithValidMessage_IncrementsCount**
  - Summary: When incrementing failure for an attached message, then FailedSteps increases.
  - Intent: Verify failure updates counters and timestamps.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L254](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L254)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.OutboxAck_AutomaticallyReportsJoinCompletion**
  - Summary: When outbox messages are acked, then join completion counts are incremented.
  - Intent: Verify outbox acknowledgements report join completion automatically.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L507](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L507)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.OutboxAck_MultipleAcksForSameMessage_IsIdempotent**
  - Summary: When the same message is acked multiple times, then join counts are not over-incremented.
  - Intent: Verify outbox ack reporting is idempotent per message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L578](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L578)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.OutboxFail_AutomaticallyReportsJoinFailure**
  - Summary: When outbox messages fail, then join failure counts are incremented.
  - Intent: Verify outbox failures report join failures automatically.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L545](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L545)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxJoinTests.UpdateStatusAsync_WithValidStatus_UpdatesJoinStatus**
  - Summary: When UpdateStatusAsync sets a status, then the join status is updated.
  - Intent: Verify status updates persist for joins.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L283](tests/Incursa.Platform.Postgres.Tests/OutboxJoinTests.cs#L283)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.ConcurrentClaim_MultipleWorkers_NoOverlap**
  - Summary: When two workers claim concurrently, then claimed sets do not overlap.
  - Intent: Verify concurrent claims are exclusive per work item.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L156](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L156)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.InvalidOwnerOperations_DoNotAffectItems**
  - Summary: When a non-owner attempts to ack items, then item status is unchanged.
  - Intent: Verify owner token enforcement for state changes.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L180](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L180)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxAbandon_WithValidOwner_ReturnsToReady**
  - Summary: When abandoning claimed items with the correct owner, then they return to Ready.
  - Intent: Verify abandon resets status for claimed items.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L106](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L106)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxAck_WithValidOwner_MarksDoneAndProcessed**
  - Summary: When acking claimed items with the correct owner, then they are marked done and processed.
  - Intent: Verify acknowledgements update status and processing flags.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L89](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L89)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxClaim_WithBatchSize_RespectsLimit**
  - Summary: When batch size is smaller than ready items, then ClaimAsync respects the limit.
  - Intent: Verify ClaimAsync honors the requested batch size.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L74](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L74)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxClaim_WithReadyItems_ReturnsClaimedIds**
  - Summary: When ready items are available, then ClaimAsync returns their ids.
  - Intent: Verify ready outbox work items can be claimed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L57](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L57)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxFail_WithValidOwner_MarksAsFailed**
  - Summary: When failing claimed items with the correct owner, then they are marked Failed.
  - Intent: Verify failure marks the work items as failed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L122](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L122)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxReapExpired_WithExpiredItems_ReturnsToReady**
  - Summary: When a claim expires, then ReapExpired returns items to Ready.
  - Intent: Verify expired leases are reaped back to Ready.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L138](tests/Incursa.Platform.Postgres.Tests/OutboxWorkQueueTests.cs#L138)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Manual_AbandonOperation_Works**
  - Summary: When AbandonAsync is called manually, then items return to Ready.
  - Intent: Verify manual abandon resets item status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L137](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L137)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_ConcurrentClaims_NoOverlap**
  - Summary: When multiple concurrent claims run, then claimed ids are unique.
  - Intent: Verify concurrency does not allow duplicate claims.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L254](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L254)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_EmptyIdLists_NoErrors**
  - Summary: When work-queue operations receive empty id lists, then they complete without error.
  - Intent: Verify empty operations are handled gracefully.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L239](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L239)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_IdempotentOperations_NoErrors**
  - Summary: When AckAsync is called repeatedly, then the operation is idempotent.
  - Intent: Verify repeated acknowledgements leave the item done.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L204](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L204)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_LeaseExpiration_AllowsReclaim**
  - Summary: When a lease expires, then another owner can reclaim the item after reaping.
  - Intent: Verify expired leases allow reclamation.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L155](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L155)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_RestartUsesNewOwnerTokenAfterReap**
  - Summary: When a claim is reaped, then the new owner token is recorded on reclaim.
  - Intent: Verify owner tokens update when items are reclaimed after expiry.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L179](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L179)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_UnauthorizedOwner_CannotModify**
  - Summary: When a non-owner attempts to modify items, then status remains InProgress.
  - Intent: Verify owner token enforcement for acknowledgements.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L222](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L222)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_ClaimsItemsCorrectly**
  - Summary: When items are claimed, then they are marked InProgress.
  - Intent: Verify claim operations update item status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L116](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L116)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_ProcessesClaimedItems_AndAcknowledgesThem**
  - Summary: When the worker processes claimed items, then it acknowledges them and marks them Done.
  - Intent: Verify the worker processes and acknowledges all claimed items.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L74](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L74)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_RespectsCancellationToken**
  - Summary: When the worker is canceled, then it stops promptly.
  - Intent: Verify cancellation short-circuits long processing delays.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L279](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L279)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_WithProcessingFailure_AbandonsItems**
  - Summary: When processing fails, then the worker abandons items back to Ready.
  - Intent: Verify failures result in abandon rather than ack.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L95](tests/Incursa.Platform.Postgres.Tests/OutboxWorkerTests.cs#L95)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresAuditAdapterTests.WriteAndQueryByAnchorRoundTrip**
  - Summary: When write And Query By Anchor Round Trip, then it behaves as expected.
  - Intent: Document expected behavior for write And Query By Anchor Round Trip.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresAuditAdapterTests.cs#L43](tests/Incursa.Platform.Postgres.Tests/PostgresAuditAdapterTests.cs#L43)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.AllTypesInSingleQuery_RoundTrip_WorksCorrectly**
  - Summary: When all identifier columns are queried together, then each property matches its inserted value.
  - Intent: Confirm multi-column mapping across all identifier type handlers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L318](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L318)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.DatabaseIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When a DatabaseIdentifier is stored, then Dapper returns the same database id.
  - Intent: Verify Dapper mapping for DatabaseIdentifier UUIDs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L286](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L286)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.InboxMessageIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an InboxMessageIdentifier is inserted, then Dapper reads the same identifier.
  - Intent: Verify Dapper mapping for InboxMessageIdentifier UUIDs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L126](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L126)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.InstanceIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an InstanceIdentifier is stored, then Dapper reads the same instance id.
  - Intent: Verify Dapper mapping for InstanceIdentifier UUIDs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L254](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L254)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.JoinIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When a JoinIdentifier is stored, then Dapper returns the same join id.
  - Intent: Verify Dapper mapping for JoinIdentifier UUIDs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L222](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L222)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.NullableOwnerToken_RoundTrip_WorksCorrectly**
  - Summary: When a nullable OwnerToken is stored in a nullable column, then it is read back intact.
  - Intent: Confirm nullable OwnerToken values are materialized correctly.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L93](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L93)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.OutboxMessageIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an OutboxMessageIdentifier is inserted, then Dapper returns the same identifier.
  - Intent: Verify Dapper mapping for OutboxMessageIdentifier UUIDs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L158](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L158)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.OutboxWorkItemIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an OutboxWorkItemIdentifier is stored, then Dapper reads it back unchanged.
  - Intent: Verify Dapper mapping for OutboxWorkItemIdentifier UUIDs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L190](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L190)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresDapperTypeHandlerTests.OwnerToken_RoundTrip_WorksCorrectly**
  - Summary: When a row is inserted with an OwnerToken, then Dapper returns the same token.
  - Intent: Confirm the OwnerToken handler maps UUID values losslessly.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L61](tests/Incursa.Platform.Postgres.Tests/PostgresDapperTypeHandlerTests.cs#L61)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresEmailDeliverySinkTests.RecordAttempt_WritesAttemptDetails**
  - Summary: When an attempt is recorded, then attempt details are stored.
  - Intent: Capture provider attempt details.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L83](tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L83)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresEmailDeliverySinkTests.RecordExternal_WritesExternalUpdate**
  - Summary: When an external update is recorded, then provider metadata is stored.
  - Intent: Capture webhook delivery updates.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L111](tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L111)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresEmailDeliverySinkTests.RecordQueued_StoresCorrelationContext**
  - Summary: When a correlation context is present, then correlation fields are stored.
  - Intent: Capture ambient correlation metadata.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L136](tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L136)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresEmailDeliverySinkTests.RecordQueued_WritesQueuedEvent**
  - Summary: When a message is queued, then a delivery event is recorded.
  - Intent: Capture queued delivery events.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L65](tests/Incursa.Platform.Postgres.Tests/PostgresEmailDeliverySinkTests.cs#L65)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresEmailOutboxStoreTests.Dequeue_ReturnsPendingItemsInOrder**
  - Summary: When dequeue is called, then pending items are returned in enqueue order.
  - Intent: Ensure due items are claimed in FIFO order.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresEmailOutboxStoreTests.cs#L86](tests/Incursa.Platform.Postgres.Tests/PostgresEmailOutboxStoreTests.cs#L86)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresEmailOutboxStoreTests.Enqueue_IsIdempotentForProviderAndMessageKey**
  - Summary: When enqueue is called twice for the same provider/key, then only one row is stored.
  - Intent: Verify idempotent enqueue behavior.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresEmailOutboxStoreTests.cs#L122](tests/Incursa.Platform.Postgres.Tests/PostgresEmailOutboxStoreTests.cs#L122)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresEmailOutboxStoreTests.Enqueue_MarksMessageKey**
  - Summary: When enqueue is called, then the provider/message key is recorded.
  - Intent: Verify idempotency key tracking.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresEmailOutboxStoreTests.cs#L60](tests/Incursa.Platform.Postgres.Tests/PostgresEmailOutboxStoreTests.cs#L60)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.AlreadyProcessedAsync_WithHash_StoresHashCorrectly**
  - Summary: When AlreadyProcessedAsync is called with a hash, then the hash is stored.
  - Intent: Verify the message hash is persisted with the inbox row.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L196](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L196)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.AlreadyProcessedAsync_WithInvalidMessageId_ThrowsArgumentException**
  - Summary: When AlreadyProcessedAsync receives a null or empty message id, then it throws ArgumentException.
  - Intent: Verify invalid message ids are rejected.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L222](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L222)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.AlreadyProcessedAsync_WithInvalidSource_ThrowsArgumentException**
  - Summary: When AlreadyProcessedAsync receives a null or empty source, then it throws ArgumentException.
  - Intent: Verify invalid sources are rejected.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L237](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L237)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.AlreadyProcessedAsync_WithNewMessage_ReturnsFalseAndRecordsMessage**
  - Summary: When AlreadyProcessedAsync is called for a new message, then it returns false and records the row.
  - Intent: Verify new messages are inserted and reported as not processed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L39](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L39)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.AlreadyProcessedAsync_WithProcessedMessage_ReturnsTrue**
  - Summary: When a message has been marked processed, then AlreadyProcessedAsync returns true.
  - Intent: Verify processed messages are detected as already processed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L64](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L64)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.ConcurrentAlreadyProcessedAsync_WithSameMessage_HandledCorrectly**
  - Summary: When multiple AlreadyProcessedAsync calls run concurrently, then one row exists with attempts tracked.
  - Intent: Verify concurrent checks create a single inbox row and increment attempts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L159](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L159)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.MarkDeadAsync_UpdatesStatus**
  - Summary: When MarkDeadAsync is called, then Status becomes Dead.
  - Intent: Verify MarkDeadAsync marks messages as dead.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L134](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L134)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.MarkProcessedAsync_SetsProcessedUtcAndStatus**
  - Summary: When MarkProcessedAsync is called, then ProcessedUtc is set and Status is Done.
  - Intent: Verify MarkProcessedAsync updates completion fields.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L83](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L83)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresInboxServiceTests.MarkProcessingAsync_UpdatesStatus**
  - Summary: When MarkProcessingAsync is called, then Status becomes Processing.
  - Intent: Verify MarkProcessingAsync moves the message into processing state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L109](tests/Incursa.Platform.Postgres.Tests/PostgresInboxServiceTests.cs#L109)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresLeaseRunnerTests.AcquireAsync_WithAvailableLease_ReturnsRunnerInstance**
  - Summary: When an available lease is acquired, then a runner is returned with valid state.
  - Intent: Verify a new lease acquisition initializes runner identity and state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L50](tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L50)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresLeaseRunnerTests.AcquireAsync_WithUnavailableLease_ReturnsNull**
  - Summary: When a lease is already held, then a second acquisition attempt returns null.
  - Intent: Confirm unavailable leases are not re-acquired by another owner.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L85](tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L85)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresLeaseRunnerTests.DisposedRunner_DoesNotRenew**
  - Summary: When a runner is disposed, then TryRenewNowAsync returns false.
  - Intent: Verify renewal requests are rejected after disposal.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L239](tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L239)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresLeaseRunnerTests.MonotonicRenewal_WithCustomRenewPercent_RenewsAtCorrectInterval**
  - Summary: When renewal is scheduled at 50% of the lease duration, then the runner stays valid past the midpoint.
  - Intent: Confirm monotonic renewal timing honors a custom renew percentage.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L201](tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L201)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresLeaseRunnerTests.RenewTimer_UsesFakeMonotonicClockAcrossClockSkewAndGcPauses**
  - Summary: When the monotonic clock jumps forward, then renewal scheduling advances using monotonic time.
  - Intent: Validate renewal scheduling resilience to wall-clock skew and GC pauses.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L272](tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L272)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresLeaseRunnerTests.ThrowIfLost_WhenLeaseIsValid_DoesNotThrow**
  - Summary: Given a valid lease runner, then ThrowIfLost does not throw.
  - Intent: Confirm loss checks are no-ops while the lease is valid.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L169](tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L169)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresLeaseRunnerTests.TryRenewNowAsync_WithValidRunner_SucceedsAndExtendsLease**
  - Summary: When a valid runner renews, then TryRenewNowAsync succeeds and the runner remains valid.
  - Intent: Verify manual renewal keeps the lease active.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L133](tests/Incursa.Platform.Postgres.Tests/PostgresLeaseRunnerTests.cs#L133)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOperationTrackerTests.AddEventAsync_CreatesOperationEvent**
  - Summary: When AddEventAsync is called, then an operation event row is created.
  - Intent: Verify operation events are persisted.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOperationTrackerTests.cs#L94](tests/Incursa.Platform.Postgres.Tests/PostgresOperationTrackerTests.cs#L94)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOperationTrackerTests.StartAsync_CreatesOperationRow**
  - Summary: When StartAsync is called, then a new operation row is created.
  - Intent: Verify operations are persisted with pending status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOperationTrackerTests.cs#L64](tests/Incursa.Platform.Postgres.Tests/PostgresOperationTrackerTests.cs#L64)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOperationWatcherTests.FindStalledAsync_ReturnsStalledOperations**
  - Summary: When an operation is stale, then FindStalledAsync returns it.
  - Intent: Verify stalled detection returns pending/running operations that are past the threshold.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOperationWatcherTests.cs#L62](tests/Incursa.Platform.Postgres.Tests/PostgresOperationWatcherTests.cs#L62)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOperationWatcherTests.MarkStalledAsync_UpdatesOperationStatus**
  - Summary: When MarkStalledAsync is called, then the operation is marked stalled.
  - Intent: Verify stalled transitions update status and completion time.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOperationWatcherTests.cs#L97](tests/Incursa.Platform.Postgres.Tests/PostgresOperationWatcherTests.cs#L97)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.Constructor_CreatesInstance**
  - Summary: When constructed with valid options, then the service is created and implements IOutbox.
  - Intent: Verify the outbox service can be instantiated with valid options.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L52](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L52)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_MultipleMessages_AllInsertedSuccessfully**
  - Summary: When multiple messages are enqueued in a transaction, then all rows are inserted.
  - Intent: Verify batch enqueues insert all messages within the transaction.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L201](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L201)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_Standalone_EnsuresTableExists**
  - Summary: When standalone enqueue runs with schema deployment enabled, then it creates the table and inserts the row.
  - Intent: Verify schema deployment ensures the outbox table exists before enqueue.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L341](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L341)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_Standalone_MultipleMessages_AllInsertedSuccessfully**
  - Summary: When multiple standalone enqueue calls are made, then all rows are inserted.
  - Intent: Verify multiple standalone enqueues insert all messages.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L304](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L304)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_Standalone_WithNullCorrelationId_InsertsMessageSuccessfully**
  - Summary: When standalone enqueue uses a null correlation id, then the message is inserted.
  - Intent: Verify standalone enqueue handles null correlation ids.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L274](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L274)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_Standalone_WithValidParameters_InsertsMessageToDatabase**
  - Summary: When using standalone enqueue, then the message is inserted with the correlation id.
  - Intent: Verify standalone enqueue persists messages without an explicit transaction.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L242](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L242)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_WithCustomSchemaAndTable_InsertsMessageToCorrectTable**
  - Summary: When using a custom schema and table, then EnqueueAsync inserts into the custom table.
  - Intent: Verify custom schema/table options are honored by enqueue.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L94](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L94)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_WithNullCorrelationId_InsertsMessageSuccessfully**
  - Summary: When EnqueueAsync is called with a null correlation id, then the message is inserted.
  - Intent: Verify null correlation ids do not block insertion.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L135](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L135)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_WithNullTransaction_ThrowsNullReferenceException**
  - Summary: When EnqueueAsync receives a null transaction, then it throws ArgumentNullException.
  - Intent: Verify EnqueueAsync validates the transaction argument.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L225](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L225)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_WithValidParameters_InsertsMessageToDatabase**
  - Summary: When EnqueueAsync is called in a transaction, then a message row is inserted.
  - Intent: Verify transactional enqueue inserts a row with topic and payload.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L65](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L65)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxServiceTests.EnqueueAsync_WithValidParameters_SetsDefaultValues**
  - Summary: When EnqueueAsync inserts a message, then default fields are set.
  - Intent: Verify default outbox values are populated on insert.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L163](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxServiceTests.cs#L163)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxStoreWhiteBoxTests.FailAsync_SetsFailureMetadata**
  - Summary: When fail Async Sets Failure Metadata, then it behaves as expected.
  - Intent: Document expected behavior for fail Async Sets Failure Metadata.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxStoreWhiteBoxTests.cs#L81](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxStoreWhiteBoxTests.cs#L81)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxStoreWhiteBoxTests.MarkDispatchedAsync_SetsProcessedFlags**
  - Summary: When mark Dispatched Async Sets Processed Flags, then it behaves as expected.
  - Intent: Document expected behavior for mark Dispatched Async Sets Processed Flags.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxStoreWhiteBoxTests.cs#L54](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxStoreWhiteBoxTests.cs#L54)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresOutboxStoreWhiteBoxTests.RescheduleAsync_IncrementsRetryCountAndSetsError**
  - Summary: When reschedule Async Increments Retry Count And Sets Error, then it behaves as expected.
  - Intent: Document expected behavior for reschedule Async Increments Retry Count And Sets Error.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresOutboxStoreWhiteBoxTests.cs#L110](tests/Incursa.Platform.Postgres.Tests/PostgresOutboxStoreWhiteBoxTests.cs#L110)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.Constructor_WithValidConnectionString_CreatesInstance**
  - Summary: When constructed with valid options, then the client is created and implements ISchedulerClient.
  - Intent: Verify the scheduler client can be instantiated with valid options.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L54](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L54)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.CreateOrUpdateJobAsync_ExistingJob_UpdatesJob**
  - Summary: When updating an existing job, then the job is updated without duplication.
  - Intent: Verify CreateOrUpdateJobAsync updates existing jobs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L185](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L185)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.CreateOrUpdateJobAsync_NewJob_InsertsJob**
  - Summary: When creating a new job, then a job row is inserted.
  - Intent: Verify CreateOrUpdateJobAsync inserts new jobs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L139](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L139)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.CreateOrUpdateJobAsync_WithNullPayload_SetsPayloadToNull**
  - Summary: When a job is created without a payload, then the payload column is null.
  - Intent: Verify null payloads are persisted as NULL.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L162](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L162)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.DeleteJobAsync_WithValidJobName_RemovesJob**
  - Summary: When deleting a job by name, then the job row is removed.
  - Intent: Verify DeleteJobAsync removes jobs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L219](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L219)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.ScheduleTimerAsync_WithCustomTableNames_InsertsToCorrectTable**
  - Summary: When scheduling with custom table names, then the timer is inserted into the custom table.
  - Intent: Verify custom schema/table names are honored for timers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L94](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L94)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.ScheduleTimerAsync_WithValidParameters_InsertsTimerToDatabase**
  - Summary: When scheduling a timer, then a timer row is inserted into the database.
  - Intent: Verify ScheduleTimerAsync persists timers to the Timers table.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L67](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L67)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.PostgresSchedulerClientTests.TriggerJobAsync_WithValidJobName_CreatesJobRun**
  - Summary: When triggering a job by name, then a job run row is created.
  - Intent: Verify TriggerJobAsync creates job runs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L244](tests/Incursa.Platform.Postgres.Tests/PostgresSchedulerClientTests.cs#L244)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_AfterLeaseReleased_CanAcquireAgain**
  - Summary: When a lease is released, then acquiring the resource again succeeds.
  - Intent: Verify release allows a new lease with a higher fencing token.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L107](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L107)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_ReentrantWithSameOwnerToken_Succeeds**
  - Summary: When acquiring the same resource with the same owner token, then both acquisitions succeed.
  - Intent: Verify reentrant acquisition with the same owner token is permitted.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L237](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L237)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_SameResourceTwice_SecondCallReturnsNull**
  - Summary: When acquiring the same resource twice, then the second call returns null.
  - Intent: Verify lease acquisition is exclusive per resource.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L84](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L84)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_WithCustomOwnerToken_UsesProvidedToken**
  - Summary: When acquiring with a custom owner token, then the lease uses the provided token.
  - Intent: Verify caller-supplied owner tokens are honored.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L212](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L212)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_WithDifferentResources_BothSucceed**
  - Summary: When acquiring leases for different resources, then both acquisitions succeed.
  - Intent: Verify resource isolation across independent leases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L184](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L184)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_WithValidResource_CanAcquireLease**
  - Summary: When acquiring a lease for a valid resource, then a lease is returned with expected metadata.
  - Intent: Verify successful lease acquisition populates owner and fencing tokens.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L59](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L59)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.ThrowIfLost_WhenLeaseIsValid_DoesNotThrow**
  - Summary: When a lease is valid, then ThrowIfLost does not throw.
  - Intent: Verify loss checks are no-ops for active leases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L163](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L163)
- **Incursa.Platform.Postgres.Tests:Incursa.Platform.Tests.SystemLeaseTests.TryRenewNowAsync_WithValidLease_SucceedsAndIncrementsFencingToken**
  - Summary: When TryRenewNowAsync is called on a valid lease, then it succeeds and increments the fencing token.
  - Intent: Verify renewal updates fencing token for a held lease.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L136](tests/Incursa.Platform.Postgres.Tests/SystemLeaseTests.cs#L136)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ConfiguredLeaseFactoryProviderTests.ConfiguredProvider_CreatesFactoriesFromConfigsAsync**
  - Summary: When lease factory configs are provided, then the provider creates a factory for each configuration.
  - Intent: Verify configured provider materializes lease factories from config entries.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ConfiguredLeaseFactoryProviderTests.cs#L45](tests/Incursa.Platform.SqlServer.Tests/ConfiguredLeaseFactoryProviderTests.cs#L45)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ConfiguredLeaseFactoryProviderTests.ConfiguredProvider_GetFactoryByKey_ReturnsCorrectFactoryAsync**
  - Summary: When a factory is requested by key, then the provider returns the matching factory or null.
  - Intent: Ensure key-based lookup resolves known factories and rejects unknown keys.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ConfiguredLeaseFactoryProviderTests.cs#L84](tests/Incursa.Platform.SqlServer.Tests/ConfiguredLeaseFactoryProviderTests.cs#L84)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ConfiguredLeaseFactoryProviderTests.ConfiguredProvider_GetFactoryIdentifier_ReturnsUnknownForInvalidFactory**
  - Summary: When a factory not created by the provider is inspected, then its identifier is reported as "Unknown".
  - Intent: Confirm identifier lookup only recognizes provider-managed factories.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ConfiguredLeaseFactoryProviderTests.cs#L127](tests/Incursa.Platform.SqlServer.Tests/ConfiguredLeaseFactoryProviderTests.cs#L127)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneConfigurationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndDiscovery_OldSignature_StillWorks**
  - Summary: When the obsolete discovery-based control plane overload is used, then it still wires defaults correctly.
  - Intent: Ensure legacy discovery registration continues to configure the control plane schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L247](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L247)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneConfigurationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndDiscovery_WithOptions_ConfiguresSchemaName**
  - Summary: When discovery-based control plane registration specifies a schema name, then configuration uses it.
  - Intent: Verify control-plane settings flow through discovery-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L84](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L84)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneConfigurationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndList_OldSignature_StillWorks**
  - Summary: When the obsolete list-based control plane overload is used, then it still wires defaults correctly.
  - Intent: Ensure legacy registration paths continue to configure the control plane schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L201](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L201)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneConfigurationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndList_RegistersGlobalSchedulerServices**
  - Summary: When control plane registration is used, then global scheduler services are available.
  - Intent: Ensure global scheduler registrations are wired for control plane environments.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L133](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L133)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneConfigurationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndList_WithOptions_ConfiguresSchemaName**
  - Summary: When list-based control plane registration specifies a schema name, then configuration uses it.
  - Intent: Verify control-plane schema settings are propagated to configuration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L38](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L38)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneConfigurationTests.PlatformControlPlaneOptions_DefaultSchemaName_IsDbo**
  - Summary: When PlatformControlPlaneOptions is created without a schema name, then it defaults to "infra".
  - Intent: Confirm control-plane options default schema aligns with platform conventions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L178](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneConfigurationTests.cs#L178)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneSchemaBundleTests.ControlPlaneBundle_AddsControlPlaneSchema_OnTopOfTenantBundle**
  - Summary: When control Plane Bundle Adds Control Plane Schema On Top Of Tenant Bundle, then it behaves as expected.
  - Intent: Document expected behavior for control Plane Bundle Adds Control Plane Schema On Top Of Tenant Bundle.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneSchemaBundleTests.cs#L55](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneSchemaBundleTests.cs#L55)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ControlPlaneSchemaBundleTests.TenantBundle_DoesNotInclude_ControlPlaneSchema**
  - Summary: When tenant Bundle Does Not Include Control Plane Schema, then it behaves as expected.
  - Intent: Document expected behavior for tenant Bundle Does Not Include Control Plane Schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ControlPlaneSchemaBundleTests.cs#L37](tests/Incursa.Platform.SqlServer.Tests/ControlPlaneSchemaBundleTests.cs#L37)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureDistributedLockSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the distributed lock schema is ensured with a custom schema, then all lock objects are created under that schema.
  - Intent: Verify distributed lock tables and procedures honor a non-default schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L48](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L48)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureFanoutSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the fanout schema is ensured with a custom schema, then fanout tables are created under that schema.
  - Intent: Verify fanout schema deployment respects custom schema configuration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L310](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L310)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureInboxSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the inbox schema is ensured with a custom schema, then the inbox table is created under that schema.
  - Intent: Verify inbox schema deployment uses the configured schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L152](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L152)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureInboxWorkQueueSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the inbox work queue schema is ensured with a custom schema, then inbox work-queue objects are created there.
  - Intent: Verify inbox work queue deployment uses custom schema names after inbox setup.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L263](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L263)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureLeaseSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the lease schema is ensured with a custom schema, then lease tables and procedures are created under that schema.
  - Intent: Verify lease schema deployment respects custom schema names.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L88](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L88)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureOutboxSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the outbox schema is ensured with a custom schema, then outbox tables are created under that schema.
  - Intent: Verify outbox table deployment honors custom schema configuration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L122](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L122)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureSchedulerSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the scheduler schema is ensured with a custom schema, then scheduler tables are created under that schema.
  - Intent: Verify scheduler schema deployment honors custom schema names.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L179](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L179)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.CustomSchemaIntegrationTests.EnsureWorkQueueSchema_WithCustomSchema_CreatesObjectsInCorrectSchema**
  - Summary: When the work queue schema is ensured with a custom schema, then work-queue types and procedures are created there.
  - Intent: Verify work queue deployment uses custom schema names after outbox setup.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L216](tests/Incursa.Platform.SqlServer.Tests/CustomSchemaIntegrationTests.cs#L216)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.AllTypesInSingleQuery_RoundTrip_WorksCorrectly**
  - Summary: When all strongly-typed IDs are inserted in one row, then Dapper retrieves each value correctly.
  - Intent: Validate multiple type handlers in a single query.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L451](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L451)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.DatabaseIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When a DatabaseIdentifier is inserted and retrieved via Dapper, then it round-trips to the same value.
  - Intent: Validate the Dapper type handler for DatabaseIdentifier.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L407](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L407)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.InboxMessageIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an InboxMessageIdentifier is inserted and retrieved via Dapper, then it round-trips to the same value.
  - Intent: Validate the Dapper type handler for InboxMessageIdentifier.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L187](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L187)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.InstanceIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an InstanceIdentifier is inserted and retrieved via Dapper, then it round-trips to the same value.
  - Intent: Validate the Dapper type handler for InstanceIdentifier.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L363](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L363)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.JoinIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When a JoinIdentifier is inserted and retrieved via Dapper, then it round-trips to the same value.
  - Intent: Validate the Dapper type handler for JoinIdentifier.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L319](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L319)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.NullableOwnerToken_RoundTrip_WorksCorrectly**
  - Summary: When a nullable OwnerToken is stored and retrieved, then values round-trip and nulls remain null.
  - Intent: Validate nullable OwnerToken handling in Dapper.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L119](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L119)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.OutboxMessageIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an OutboxMessageIdentifier is inserted and retrieved via Dapper, then it round-trips to the same value.
  - Intent: Validate the Dapper type handler for OutboxMessageIdentifier.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L231](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L231)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.OutboxWorkItemIdentifier_RoundTrip_WorksCorrectly**
  - Summary: When an OutboxWorkItemIdentifier is inserted and retrieved via Dapper, then it round-trips to the same value.
  - Intent: Validate the Dapper type handler for OutboxWorkItemIdentifier.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L275](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L275)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DapperTypeHandlerTests.OwnerToken_RoundTrip_WorksCorrectly**
  - Summary: When an OwnerToken is inserted and retrieved via Dapper, then it round-trips to the same value.
  - Intent: Validate the Dapper type handler for OwnerToken.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L75](tests/Incursa.Platform.SqlServer.Tests/DapperTypeHandlerTests.cs#L75)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.CustomSchemaNames_WorkCorrectly**
  - Summary: When a custom schema name is used, then scheduler tables and indexes are created in that schema.
  - Intent: Ensure schema customization works for scheduler artifacts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L325](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L325)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.DatabaseSchema_AllRequiredTablesExist**
  - Summary: When the schema is deployed, then all required core tables exist in the infra schema.
  - Intent: Verify core platform tables are created in the test database.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L66](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L66)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.InboxTable_HasCorrectSchema**
  - Summary: When inspecting the Inbox table, then required columns exist with expected data types.
  - Intent: Ensure inbox schema matches production column definitions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L269](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L269)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.JobRunsTable_HasCorrectSchema**
  - Summary: When inspecting the JobRuns table, then required columns exist with expected data types.
  - Intent: Ensure job run schema matches production column definitions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L232](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L232)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.JobsTable_HasCorrectSchema**
  - Summary: When inspecting the Jobs table, then required columns exist with expected data types.
  - Intent: Ensure jobs schema matches production column definitions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L162](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L162)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.OutboxTable_HasCorrectSchema**
  - Summary: When inspecting the Outbox table, then required columns exist with expected data types.
  - Intent: Ensure outbox schema matches production column definitions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L122](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L122)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.RequiredIndexes_ExistOnAllTables**
  - Summary: When required indexes are inspected, then core tables have the expected indexes.
  - Intent: Verify production index definitions are present in tests.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L300](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L300)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.TimersTable_HasCorrectSchema**
  - Summary: When inspecting the Timers table, then required columns exist with expected data types.
  - Intent: Ensure timers schema matches production column definitions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L194](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L194)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.WorkQueueColumns_ExistAfterMigration**
  - Summary: When work-queue migrations are applied, then work-queue columns and types exist.
  - Intent: Verify work-queue migration adds required columns and table types.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L367](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L367)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaConsistencyTests.WorkQueueProcedures_UseDatabaseUtcTime**
  - Summary: When work-queue procedures are inspected, then they use SYSUTCDATETIME for timing.
  - Intent: Ensure stored procedures rely on database-authoritative time.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L392](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaConsistencyTests.cs#L392)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddSqlOutbox_WithSchemaDeploymentDisabled_DoesNotRegisterSchemaService**
  - Summary: When AddSqlOutbox disables schema deployment, then schema completion and background services are not registered.
  - Intent: Avoid schema deployment services when deployment is disabled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L72](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L72)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddSqlOutbox_WithSchemaDeploymentEnabled_RegistersSchemaService**
  - Summary: When AddSqlOutbox enables schema deployment, then schema completion and background services are registered.
  - Intent: Ensure schema deployment wiring is added when enabled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L38](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L38)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndList_WithSchemaDeploymentEnabled_RegistersSchemaService**
  - Summary: When control-plane registration enables schema deployment, then schema services are registered.
  - Intent: Ensure schema deployment services are added for control-plane registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L222](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L222)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddSqlPlatformMultiDatabaseWithList_WithSchemaDeploymentDisabled_DoesNotRegisterSchemaService**
  - Summary: When multi-database list registration disables schema deployment, then schema services are not registered.
  - Intent: Avoid schema deployment services when list-based registration disables deployment.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L269](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L269)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.AddSqlPlatformMultiDatabaseWithList_WithSchemaDeploymentEnabled_RegistersSchemaService**
  - Summary: When multi-database list registration enables schema deployment, then schema services are registered.
  - Intent: Ensure schema deployment services are added for list-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L182](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L182)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.DatabaseSchemaCompletion_CoordinatesStateCorrectly**
  - Summary: When DatabaseSchemaCompletion is completed, then its completion task transitions to RanToCompletion.
  - Intent: Ensure schema completion state tracking works as expected.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L153](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L153)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.SchemaCompletion_RegisteredSeparatelyFromBackgroundService**
  - Summary: When schema deployment is enabled, then IDatabaseSchemaCompletion and DatabaseSchemaCompletion are registered separately.
  - Intent: Verify schema completion registrations use the expected lifetimes and factories.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L106](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L106)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DatabaseSchemaDeploymentTests.SchemaSnapshotManifest_IsTracked**
  - Summary: When the schema snapshot manifest is expected, then the snapshot file exists on disk.
  - Intent: Ensure the schema snapshot artifact is tracked in the repository.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L309](tests/Incursa.Platform.SqlServer.Tests/DatabaseSchemaDeploymentTests.cs#L309)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicDiscoveryEnforcementTests.PlatformProviders_ShouldUseDiscoveryAsync**
  - Summary: Verifies that providers use the correct discovery instance.
  - Intent: Ensure providers use IPlatformDatabaseDiscovery results for tenant enumeration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L201](tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L201)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicDiscoveryEnforcementTests.PlatformWithDiscovery_ShouldNotConfigureCustomerDatabaseOptions**
  - Summary: Verifies that when using platform registration with discovery, customer database features (Inbox, Outbox, Lease, Scheduler, Fanout) do NOT have services.Configure<TOptions>() called (they should use discovery instead). Global features may have Configure<TOptions>() called.
  - Intent: Enforce discovery-driven configuration for tenant features while allowing global options.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L44](tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L44)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicDiscoveryEnforcementTests.PlatformWithDiscovery_ShouldRegisterAllProviders**
  - Summary: Verifies that all customer database features have their providers registered when using platform registration.
  - Intent: Validate provider registration for outbox, inbox, scheduler, fanout, and leases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L151](tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L151)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicDiscoveryEnforcementTests.PlatformWithList_ShouldNotConfigureCustomerDatabaseOptions**
  - Summary: Verifies that when using platform registration with a list, customer database features do NOT have services.Configure<TOptions>() called.
  - Intent: Ensure list-based registration still relies on discovery providers rather than direct options.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L98](tests/Incursa.Platform.SqlServer.Tests/DynamicDiscoveryEnforcementTests.cs#L98)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicInboxWorkStoreProviderTests.DynamicProvider_DetectsNewDatabases**
  - Summary: When a new inbox database is added to discovery, then RefreshAsync updates the store list.
  - Intent: Ensure the provider detects newly added inbox databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L104](tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L104)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicInboxWorkStoreProviderTests.DynamicProvider_DetectsRemovedDatabases**
  - Summary: When an inbox database is removed from discovery, then RefreshAsync removes its store.
  - Intent: Ensure the provider drops stores for removed inbox databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L160](tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L160)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicInboxWorkStoreProviderTests.DynamicProvider_DiscoversInitialDatabases**
  - Summary: When the dynamic inbox provider performs initial discovery, then it returns stores for all configured databases.
  - Intent: Verify initial discovery populates inbox work stores from discovery results.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L51](tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L51)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicInboxWorkStoreProviderTests.DynamicProvider_RefreshesAutomaticallyAfterInterval**
  - Summary: When the refresh interval elapses, then the provider automatically refreshes discovery results.
  - Intent: Validate time-based automatic refresh behavior for inbox work stores.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L216](tests/Incursa.Platform.SqlServer.Tests/DynamicInboxWorkStoreProviderTests.cs#L216)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicLeaseFactoryProviderTests.DynamicProvider_DetectsConnectionStringChanges**
  - Summary: When a connection string changes for an existing key, then RefreshAsync recreates the factory.
  - Intent: Ensure the provider detects connection string changes and refreshes factories.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L333](tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L333)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicLeaseFactoryProviderTests.DynamicProvider_DetectsNewDatabases**
  - Summary: When a new lease database is added to discovery, then RefreshAsync updates the factory list.
  - Intent: Ensure the provider detects newly added lease databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L104](tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L104)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicLeaseFactoryProviderTests.DynamicProvider_DetectsRemovedDatabases**
  - Summary: When a lease database is removed from discovery, then RefreshAsync removes its factory.
  - Intent: Ensure the provider drops factories for removed lease databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L161](tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L161)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicLeaseFactoryProviderTests.DynamicProvider_DiscoversInitialDatabases**
  - Summary: When the dynamic lease provider performs initial discovery, then it returns factories for all configured databases.
  - Intent: Verify initial discovery populates lease factories from discovery results.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L51](tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L51)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicLeaseFactoryProviderTests.DynamicProvider_GetFactoryByKey_ReturnsCorrectFactory**
  - Summary: When known lease keys are requested, then GetFactoryByKeyAsync returns the matching factories.
  - Intent: Verify keyed lease factory lookup works after discovery.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L273](tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L273)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicLeaseFactoryProviderTests.DynamicProvider_RefreshesAutomaticallyAfterInterval**
  - Summary: When the refresh interval elapses, then the provider automatically refreshes discovery results.
  - Intent: Validate time-based automatic refresh behavior for lease factories.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L218](tests/Incursa.Platform.SqlServer.Tests/DynamicLeaseFactoryProviderTests.cs#L218)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicOutboxStoreProviderTests.DynamicProvider_DetectsNewDatabases**
  - Summary: When a new outbox database is added to discovery, then RefreshAsync updates the store list.
  - Intent: Ensure the provider detects newly added outbox databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L127](tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L127)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicOutboxStoreProviderTests.DynamicProvider_DetectsRemovedDatabases**
  - Summary: When an outbox database is removed from discovery, then RefreshAsync removes its store.
  - Intent: Ensure the provider drops stores for removed outbox databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L183](tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L183)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicOutboxStoreProviderTests.DynamicProvider_DiscoversInitialDatabases**
  - Summary: When the dynamic outbox provider performs initial discovery, then it returns stores for all configured databases.
  - Intent: Verify initial discovery populates outbox stores from discovery results.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L74](tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L74)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicOutboxStoreProviderTests.DynamicProvider_RefreshesAutomaticallyAfterInterval**
  - Summary: When the refresh interval elapses, then the provider automatically refreshes discovery results.
  - Intent: Validate time-based automatic refresh behavior.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L239](tests/Incursa.Platform.SqlServer.Tests/DynamicOutboxStoreProviderTests.cs#L239)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicSchedulerStoreProviderTests.DynamicProvider_DetectsNewDatabases**
  - Summary: When a new database appears in discovery, then RefreshAsync updates the store list.
  - Intent: Ensure the provider detects newly added scheduler databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L108](tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L108)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicSchedulerStoreProviderTests.DynamicProvider_DetectsRemovedDatabases**
  - Summary: When a database is removed from discovery, then RefreshAsync removes its store.
  - Intent: Ensure the provider drops stores for removed scheduler databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L163](tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L163)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicSchedulerStoreProviderTests.DynamicProvider_DiscoversInitialDatabases**
  - Summary: When the dynamic scheduler provider performs initial discovery, then it returns stores for all configured databases.
  - Intent: Verify initial discovery populates scheduler stores from discovery results.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L51](tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L51)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicSchedulerStoreProviderTests.DynamicProvider_GetSchedulerClientByKey_ReturnsCorrectClient**
  - Summary: When a known scheduler key is requested, then GetSchedulerClientByKey returns a client instance.
  - Intent: Verify keyed scheduler client lookup works after discovery.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L218](tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L218)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.DynamicSchedulerStoreProviderTests.DynamicProvider_GetSchedulerClientByKey_ReturnsNullForUnknownKey**
  - Summary: When an unknown scheduler key is requested, then GetSchedulerClientByKey returns null.
  - Intent: Ensure missing scheduler keys are reported as null lookups.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L262](tests/Incursa.Platform.SqlServer.Tests/DynamicSchedulerStoreProviderTests.cs#L262)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.FanoutSlices_CanJoinDownstreamMessagesIdempotently**
  - Summary: When fanout slices share a correlation ID, then join completion is idempotent and correlation IDs match.
  - Intent: Validate downstream join tracking for fanout-dispatched messages.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L201](tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L201)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.RunAsync_RedispatchesAbandonedSlices**
  - Summary: When cursors do not advance, then RunAsync redispatches the same slice on subsequent runs.
  - Intent: Ensure abandoned slices can be redispatched.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L130](tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L130)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.RunAsync_RespectsActiveLeaseAndRecoversAfterExpiry**
  - Summary: When a lease is active, then RunAsync returns no dispatches, and after the lease expires it dispatches the slice once.
  - Intent: Verify lease gating and recovery behavior for the fanout coordinator.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L93](tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L93)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutCoordinatorIntegrationTests.RunAsync_SkipsCompletedSlicesAfterCursorAdvances**
  - Summary: When fanout cursors are marked completed, then RunAsync skips dispatching completed slices.
  - Intent: Confirm cursor advancement prevents duplicate dispatches.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L164](tests/Incursa.Platform.SqlServer.Tests/FanoutCoordinatorIntegrationTests.cs#L164)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutRouterIntegrationTests.AddDynamicMultiSqlFanout_RegistersServicesCorrectly**
  - Summary: When dynamic fanout discovery loads tenants, then policy and cursor repositories are created for each tenant.
  - Intent: Validate discovery-based fanout configuration builds repositories from discovered databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L251](tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L251)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutRouterIntegrationTests.AddMultiSqlFanout_RepositoryProvider_ReturnsCorrectIdentifiers**
  - Summary: When repository identifiers are requested, then each repository returns a unique non-empty identifier.
  - Intent: Ensure repository identifiers map uniquely to configured tenants.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L119](tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L119)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutRouterIntegrationTests.AddMultiSqlFanout_WithListOfOptions_RegistersServicesCorrectly**
  - Summary: When fanout is configured with multiple option entries, then repositories are created per tenant and routed correctly.
  - Intent: Validate list-based fanout configuration builds distinct policy and cursor repositories.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L50](tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L50)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutRouterIntegrationTests.FanoutRouter_GetPolicyRepository_ReturnsCorrectRepository**
  - Summary: When a known tenant key is requested, then FanoutRouter returns the policy and cursor repositories.
  - Intent: Verify router lookup returns repositories for configured tenants.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L172](tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L172)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.FanoutRouterIntegrationTests.FanoutRouter_GetPolicyRepository_ThrowsWhenKeyNotFound**
  - Summary: When a tenant key is missing, then FanoutRouter throws an InvalidOperationException containing the key.
  - Intent: Ensure invalid fanout keys are rejected with actionable errors.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L211](tests/Incursa.Platform.SqlServer.Tests/FanoutRouterIntegrationTests.cs#L211)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.GlobalControlPlaneRoutingTests.GlobalAliases_RouteToControlPlane**
  - Summary: When global Aliases Route To Control Plane, then it behaves as expected.
  - Intent: Document expected behavior for global Aliases Route To Control Plane.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/GlobalControlPlaneRoutingTests.cs#L38](tests/Incursa.Platform.SqlServer.Tests/GlobalControlPlaneRoutingTests.cs#L38)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxCleanupTests.CleanupService_GracefullyHandles_MissingStoredProcedure**
  - Summary: When the cleanup stored procedure is missing, then the cleanup service runs without crashing.
  - Intent: Ensure the background cleanup service tolerates missing schema deployment.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L221](tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L221)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxCleanupTests.Cleanup_DeletesOldProcessedMessages**
  - Summary: When cleanup runs with a retention window, then only processed messages older than the window are deleted.
  - Intent: Verify the cleanup procedure removes stale processed inbox records.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L45](tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L45)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxCleanupTests.Cleanup_RespectsRetentionPeriod**
  - Summary: When cleanup runs with a 10-day retention period, then only messages older than 10 days are deleted.
  - Intent: Confirm retention period filtering is applied correctly.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L163](tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L163)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxCleanupTests.Cleanup_WithNoOldMessages_DeletesNothing**
  - Summary: When cleanup runs and no processed messages are older than retention, then nothing is deleted.
  - Intent: Ensure cleanup is a no-op when no rows qualify.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L122](tests/Incursa.Platform.SqlServer.Tests/InboxCleanupTests.cs#L122)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_RotatesOwnerTokensAcrossRuns**
  - Summary: When RunOnceAsync is called multiple times, then each run uses a new owner token.
  - Intent: Ensure dispatcher rotates owner tokens across separate runs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L229](tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L229)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithFailingHandler_AbandonsWithBackoffPolicy**
  - Summary: When a handler fails and a backoff policy is supplied, then the message is abandoned with that delay.
  - Intent: Ensure dispatcher honors custom backoff delays on failure.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L165](tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L165)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithFailingHandler_RetriesWithBackoff**
  - Summary: When a handler throws, then RunOnceAsync abandons the message for retry.
  - Intent: Validate failure paths return messages to Seen for future retries.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L131](tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L131)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithNoHandlerForTopic_MarksMessageAsDead**
  - Summary: When no handler exists for a message topic, then RunOnceAsync marks the message Dead.
  - Intent: Ensure unhandled topics are failed instead of retried indefinitely.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L98](tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L98)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithNoMessages_ReturnsZero**
  - Summary: When RunOnceAsync is called with no inbox messages, then it returns zero processed items.
  - Intent: Verify the dispatcher reports no work when the store is empty.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L46](tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L46)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithPoisonMessage_FailsInsteadOfRetrying**
  - Summary: When a message exceeds max attempts, then RunOnceAsync fails it instead of retrying.
  - Intent: Verify poison-message handling respects maxAttempts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L197](tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L197)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxDispatcherTests.RunOnceAsync_WithValidMessage_ProcessesSuccessfully**
  - Summary: When a message has a matching handler, then RunOnceAsync processes it and marks it Done.
  - Intent: Validate successful handler execution updates inbox status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L65](tests/Incursa.Platform.SqlServer.Tests/InboxDispatcherTests.cs#L65)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxIntegrationTests.CompleteInboxWorkflow_DirectServiceUsage_WorksEndToEnd**
  - Summary: When the inbox service is used end-to-end, then a message transitions to Done and is reported as processed.
  - Intent: Validate the core inbox workflow from first check through completion.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxIntegrationTests.cs#L39](tests/Incursa.Platform.SqlServer.Tests/InboxIntegrationTests.cs#L39)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxIntegrationTests.ConcurrentAccess_WithMultipleThreads_HandledSafely**
  - Summary: When multiple threads call AlreadyProcessedAsync concurrently, then only one record is created and attempts are tracked.
  - Intent: Ensure inbox deduplication remains safe under concurrent access.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxIntegrationTests.cs#L113](tests/Incursa.Platform.SqlServer.Tests/InboxIntegrationTests.cs#L113)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxIntegrationTests.PoisonMessageWorkflow_MarkingAsDead_WorksCorrectly**
  - Summary: When a message is marked dead, then its inbox status is Dead and processed time remains null.
  - Intent: Verify poison-message handling sets the expected state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxIntegrationTests.cs#L79](tests/Incursa.Platform.SqlServer.Tests/InboxIntegrationTests.cs#L79)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterIntegrationTests.AddDynamicMultiSqlInbox_CreatesProviderCorrectly**
  - Summary: When dynamic discovery is used, then a dynamic inbox provider and router can be created.
  - Intent: Confirm the dynamic provider pattern constructs functional components.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L164](tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L164)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterIntegrationTests.AddDynamicMultiSqlInbox_WithCustomRefreshInterval_ConfiguresCorrectly**
  - Summary: When a custom refresh interval is supplied, then the dynamic provider is created with that setting.
  - Intent: Ensure dynamic inbox discovery supports custom refresh intervals.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L193](tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L193)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterIntegrationTests.AddMultiSqlInbox_WithCustomSelectionStrategy_UsesProvidedStrategy**
  - Summary: When a custom selection strategy is supplied, then a dispatcher can be built with it.
  - Intent: Ensure the multi-inbox pattern supports replacing the selection strategy.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L94](tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L94)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterIntegrationTests.AddMultiSqlInbox_WithListOfOptions_RegistersServicesCorrectlyAsync**
  - Summary: When a list of inbox options is used, then the provider and router resolve inboxes for each tenant.
  - Intent: Validate configured multi-inbox wiring produces usable stores and router outputs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L46](tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L46)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterIntegrationTests.AddMultiSqlInbox_WithStoreProviderFactory_CreatesProviderCorrectlyAsync**
  - Summary: When the provider factory pattern is used, then a configured inbox store provider is created.
  - Intent: Verify the factory produces a ConfiguredInboxWorkStoreProvider with expected stores.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L131](tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L131)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterIntegrationTests.DynamicDiscovery_RoutesToCorrectDatabase**
  - Summary: When dynamic discovery loads tenant configurations, then routing returns distinct inboxes per tenant.
  - Intent: Validate router behavior with dynamically discovered tenants.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L264](tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L264)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterIntegrationTests.MultiTenantScenario_RoutesToCorrectInbox**
  - Summary: When tenant keys are routed, then each key maps to a distinct inbox instance.
  - Intent: Demonstrate multi-tenant routing using configured inbox options.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L221](tests/Incursa.Platform.SqlServer.Tests/InboxRouterIntegrationTests.cs#L221)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterTests.InboxRouter_WithGuidKey_ReturnsInbox**
  - Summary: When a Guid tenant key is requested, then the router returns an inbox instance.
  - Intent: Verify inbox routing by Guid key converted to string.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L69](tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L69)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterTests.InboxRouter_WithInvalidKey_ThrowsException**
  - Summary: When an unknown tenant key is requested, then the router throws an InvalidOperationException.
  - Intent: Ensure the router fails fast for missing tenant entries.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L99](tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L99)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterTests.InboxRouter_WithNullKey_ThrowsArgumentException**
  - Summary: When an empty tenant key is requested, then the router throws an ArgumentException.
  - Intent: Validate tenant key input guarding.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L125](tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L125)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterTests.InboxRouter_WithNullProvider_ThrowsArgumentNullException**
  - Summary: When the router is constructed with a null provider, then it throws an ArgumentNullException.
  - Intent: Ensure InboxRouter requires a non-null store provider.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L151](tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L151)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxRouterTests.InboxRouter_WithValidKey_ReturnsInbox**
  - Summary: When a configured tenant key is requested, then the router returns an inbox instance.
  - Intent: Verify inbox routing by string key for configured stores.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L34](tests/Incursa.Platform.SqlServer.Tests/InboxRouterTests.cs#L34)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.AbandonAsync_WithClaimedMessage_ReturnsToSeen**
  - Summary: When AbandonAsync is called by the owner, then the message returns to Seen status.
  - Intent: Verify abandoning a claim resets the inbox state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L161](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L161)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.AckAsync_WithClaimedMessage_MarksAsDone**
  - Summary: When AckAsync is called by the owner, then the message is marked Done and processed time is set.
  - Intent: Verify successful acknowledgements update inbox state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L128](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L128)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.ClaimAsync_WithAvailableMessage_ClaimsSuccessfully**
  - Summary: When a ready message exists, then ClaimAsync claims it and marks it as processing.
  - Intent: Verify claims update inbox status and owner token correctly.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L63](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L63)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.ClaimAsync_WithConcurrentWorkers_EnsuresExclusiveClaims**
  - Summary: When two workers claim concurrently, then only one receives the message.
  - Intent: Ensure exclusive claims under concurrent callers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L97](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L97)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.ClaimAsync_WithNoMessages_ReturnsEmpty**
  - Summary: When ClaimAsync is called with no pending messages, then it returns an empty set.
  - Intent: Confirm the inbox work store returns no claims when there is no work.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L45](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L45)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.FailAsync_WithClaimedMessage_MarksAsDead**
  - Summary: When FailAsync is called by the owner, then the message is marked Dead.
  - Intent: Verify failed processing sets the inbox message to Dead.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L193](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L193)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.GetAsync_WithInvalidMessageId_ThrowsException**
  - Summary: When GetAsync is called with an unknown message id, then it throws an InvalidOperationException.
  - Intent: Ensure missing inbox messages result in a failure.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L284](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L284)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.GetAsync_WithValidMessageId_ReturnsMessage**
  - Summary: When GetAsync is called with a valid message id, then it returns the stored message details.
  - Intent: Verify inbox work store retrieval returns expected fields.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L258](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L258)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.InboxWorkStoreTests.OwnerTokenEnforcement_OnlyAllowsOperationsByOwner**
  - Summary: When a non-owner tries to acknowledge a claim, then the message remains in Processing.
  - Intent: Ensure owner token enforcement prevents unauthorized state changes.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L225](tests/Incursa.Platform.SqlServer.Tests/InboxWorkStoreTests.cs#L225)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenAllStepsCompleted_MarksJoinAsCompleted**
  - Summary: When all join steps are completed, then HandleAsync marks the join as completed.
  - Intent: Ensure successful joins transition to the Completed status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L144](tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L144)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenCompletedSuccessfully_EnqueuesFollowUpMessage**
  - Summary: When a join completes with follow-up settings, then HandleAsync enqueues the follow-up outbox message.
  - Intent: Verify that completion triggers an additional outbox message when configured.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L252](tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L252)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenFailIfAnyStepFailedIsFalse_CompletesEvenWithFailures**
  - Summary: When FailIfAnyStepFailed is false, then HandleAsync completes the join even if some steps failed.
  - Intent: Allow joins to complete successfully when failure tolerance is enabled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L361](tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L361)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenJoinAlreadyCompleted_IsIdempotent**
  - Summary: When a join is already completed, then repeated HandleAsync calls leave it completed.
  - Intent: Ensure join completion handling is idempotent.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L309](tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L309)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenJoinNotReady_ThrowsJoinNotReadyException**
  - Summary: When a join has incomplete steps, then HandleAsync throws JoinNotReadyException.
  - Intent: Prevent completion handling until all expected steps are finished.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L97](tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L97)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.JoinWaitHandlerTests.HandleAsync_WhenSomeStepsFailed_MarksJoinAsFailed**
  - Summary: When any join step fails and failures are not allowed, then HandleAsync marks the join as failed.
  - Intent: Enforce failure propagation when FailIfAnyStepFailed is true.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L198](tests/Incursa.Platform.SqlServer.Tests/JoinWaitHandlerTests.cs#L198)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseRunnerTests.AcquireAsync_WithAvailableLease_ReturnsRunnerInstance**
  - Summary: When a lease is available, then AcquireAsync returns a runner with initialized state.
  - Intent: Validate LeaseRunner acquisition returns a usable runner instance.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L58](tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L58)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseRunnerTests.AcquireAsync_WithUnavailableLease_ReturnsNull**
  - Summary: When a lease is already held, then a second AcquireAsync returns null.
  - Intent: Ensure LeaseRunner does not acquire a lease already owned by another runner.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L101](tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L101)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseRunnerTests.DisposedRunner_DoesNotRenew**
  - Summary: When a runner is disposed, then TryRenewNowAsync returns false.
  - Intent: Ensure disposed runners do not attempt renewals.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L287](tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L287)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseRunnerTests.MonotonicRenewal_WithCustomRenewPercent_RenewsAtCorrectInterval**
  - Summary: When a custom renew percent is used, then automatic renewal keeps the runner valid past the threshold.
  - Intent: Validate that automatic renewal triggers early enough to avoid lease loss.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L241](tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L241)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseRunnerTests.RenewTimer_UsesMonotonicClockAcrossClockSkewAndGcPauses**
  - Summary: When the monotonic clock jumps forward, then renewal scheduling advances based on monotonic time without over-renewing.
  - Intent: Confirm renewal scheduling relies on monotonic time even across simulated pauses.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L328](tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L328)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseRunnerTests.ThrowIfLost_WhenLeaseIsValid_DoesNotThrow**
  - Summary: When a lease is still valid, then ThrowIfLost does not throw.
  - Intent: Ensure the guard does not falsely signal a lost lease.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L201](tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L201)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseRunnerTests.TryRenewNowAsync_WithValidRunner_SucceedsAndExtendsLease**
  - Summary: When TryRenewNowAsync is called on a valid runner, then renewal succeeds and the lease is not lost.
  - Intent: Confirm manual renewal succeeds for a current lease owner.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L157](tests/Incursa.Platform.SqlServer.Tests/LeaseRunnerTests.cs#L157)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseTests.AcquireAsync_WithExpiredLease_SucceedsAndReturnsNewExpiry**
  - Summary: When a prior lease has expired, then a new owner can acquire it and receives a fresh expiry.
  - Intent: Confirm expired leases can be reacquired by another owner.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L120](tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L120)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseTests.AcquireAsync_WithFreeResource_SucceedsAndReturnsServerTime**
  - Summary: When a free lease is acquired, then the acquisition succeeds and returns server time with a calculated expiry.
  - Intent: Verify successful acquisition returns timing data from the server.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L52](tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L52)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseTests.AcquireAsync_WithOccupiedResource_FailsAndReturnsServerTime**
  - Summary: When a lease is already held, then a second acquisition attempt fails and returns server time without an expiry.
  - Intent: Ensure AcquireAsync reports contention without granting a lease.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L86](tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L86)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseTests.RenewAsync_WithExpiredLease_FailsAndReturnsServerTime**
  - Summary: When a lease has already expired, then renewal fails and no expiry is returned.
  - Intent: Ensure expired leases cannot be renewed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L230](tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L230)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseTests.RenewAsync_WithValidOwner_SucceedsAndExtendsLease**
  - Summary: When the current lease owner renews, then the lease is extended and server time advances.
  - Intent: Validate successful renewals extend the lease window.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L158](tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L158)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.LeaseTests.RenewAsync_WithWrongOwner_FailsAndReturnsServerTime**
  - Summary: When a non-owner attempts to renew a lease, then renewal fails and no expiry is returned.
  - Intent: Prevent renewals from unauthorized owners.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L196](tests/Incursa.Platform.SqlServer.Tests/LeaseTests.cs#L196)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.ManualSchemaExportTests.DeploySchemaAndExportToSqlProject**
  - Summary: This manual test deploys all platform schemas to a fresh SQL Server container and then uses SqlPackage to extract the schema and update the SQL Server project. This test creates two separate databases and two separate dacpac files: 1. Control Plane database - contains Central Metrics schema 2. Multi-Database schema - contains Outbox, Inbox, Scheduler, Lease, Fanout, Metrics, and DistributedLock schemas Note: This test is skipped by default to prevent it from running in CI. To run it, remove the Skip parameter or run it explicitly using the test filter.
  - Intent: Provide a manual workflow for updating the SQL Server project from deployed schema.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/ManualSchemaExportTests.cs#L91](tests/Incursa.Platform.SqlServer.Tests/ManualSchemaExportTests.cs#L91)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MetricsSchemaTests.MetricDef_Table_Should_Exist**
  - Summary: When the metrics schema is deployed, then the MetricDef table exists in the infra schema.
  - Intent: Verify the schema deployment creates the metric definition table.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L44](tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L44)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MetricsSchemaTests.MetricPointMinute_Table_Should_Exist**
  - Summary: When the metrics schema is deployed, then the MetricPointMinute table exists in the infra schema.
  - Intent: Verify the schema deployment creates the minute-bucket metric points table.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L76](tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L76)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MetricsSchemaTests.MetricSeries_Table_Should_Exist**
  - Summary: When the metrics schema is deployed, then the MetricSeries table exists in the infra schema.
  - Intent: Verify the schema deployment creates the metric series table.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L60](tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L60)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MetricsSchemaTests.SpUpsertMetricPointMinute_Should_Insert_And_Update**
  - Summary: When SpUpsertMetricPointMinute is called twice for the same bucket, then the row is updated additively.
  - Intent: Validate the minute-bucket upsert merges sums, counts, and min/max/last values.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L119](tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L119)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MetricsSchemaTests.SpUpsertSeries_Should_Create_Series**
  - Summary: When SpUpsertSeries executes with a new series definition, then it returns a positive series id.
  - Intent: Confirm the series upsert procedure creates or locates a series record.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L92](tests/Incursa.Platform.SqlServer.Tests/MetricsSchemaTests.cs#L92)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.ListRegistration_WiresControlPlaneAndDiscoversDatabases**
  - Summary: When list-based control plane registration is built, then configuration and discovery expose all tenant databases.
  - Intent: Validate list-based control plane wiring and tenant discovery.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L56](tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L56)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_Discovery_MultipleTenants**
  - Summary: When discovery-based multi-tenant outbox dispatch runs, then one message is processed per tenant.
  - Intent: Validate outbox dispatch for discovery-based registration across multiple tenants.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L174](tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L174)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_Discovery_SingleTenant**
  - Summary: When discovery-based outbox dispatch runs for a single tenant, then the message is processed once.
  - Intent: Confirm outbox dispatch works for a single tenant using discovery-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L212](tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L212)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_List_MultipleTenants**
  - Summary: When list-based multi-tenant outbox dispatch runs, then one message is processed per tenant.
  - Intent: Ensure outbox dispatch processes tenant messages with list-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L100](tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L100)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiDatabaseControlPlaneIntegrationTests.OutboxDispatch_List_SingleTenant**
  - Summary: When list-based outbox dispatch runs for a single tenant, then the message is processed once.
  - Intent: Confirm outbox dispatch works for a single tenant using list-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L139](tests/Incursa.Platform.SqlServer.Tests/MultiDatabaseControlPlaneIntegrationTests.cs#L139)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiInboxDispatcherLeaseTests.MultiInboxDispatcher_WithLease_PreventsConcurrentProcessing**
  - Summary: When two dispatchers share a lease router, then only one processes all inbox messages while the other is blocked.
  - Intent: Confirm that lease-based coordination prevents concurrent processing across dispatchers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiInboxDispatcherLeaseTests.cs#L52](tests/Incursa.Platform.SqlServer.Tests/MultiInboxDispatcherLeaseTests.cs#L52)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiInboxDispatcherLeaseTests.MultiInboxDispatcher_WithoutLease_AllowsProcessing**
  - Summary: When a dispatcher has no lease router, then it processes all available inbox messages.
  - Intent: Validate that processing is unrestricted when lease coordination is disabled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiInboxDispatcherLeaseTests.cs#L172](tests/Incursa.Platform.SqlServer.Tests/MultiInboxDispatcherLeaseTests.cs#L172)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherLeaseTests.MultiOutboxDispatcher_WithLease_PreventsConcurrentProcessing**
  - Summary: When two dispatchers run with a shared lease router, then only one processes the queued messages.
  - Intent: Verify the lease gate prevents concurrent processing of the same outbox.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherLeaseTests.cs#L44](tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherLeaseTests.cs#L44)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherLeaseTests.MultiOutboxDispatcher_WithoutLease_AllowsProcessing**
  - Summary: When the dispatcher runs without a lease router, then it processes all available messages.
  - Intent: Ensure outbox processing proceeds without lease coordination when disabled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherLeaseTests.cs#L155](tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherLeaseTests.cs#L155)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherTests.MultiOutboxDispatcher_ProcessesMessagesFromMultipleStores**
  - Summary: When the dispatcher runs across multiple stores, then it processes messages from each store.
  - Intent: Validate multi-store dispatching with round-robin selection.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherTests.cs#L43](tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherTests.cs#L43)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.MultiOutboxDispatcherTests.MultiOutboxDispatcher_WithDrainFirstStrategy_DrainsOneStoreBeforeMoving**
  - Summary: When using the drain-first strategy, then the dispatcher drains one store before moving on.
  - Intent: Verify drain-first selection keeps working a store until it is empty.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherTests.cs#L157](tests/Incursa.Platform.SqlServer.Tests/MultiOutboxDispatcherTests.cs#L157)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlFanout_ThrowsForMissingConnectionString**
  - Summary: When AddSqlFanout is called with a missing connection string, then it throws an OptionsValidationException.
  - Intent: Ensure fanout registration validates required connection string settings.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L129](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L129)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlFanout_ThrowsForMissingSchemaName**
  - Summary: When AddSqlFanout is called with a missing schema name, then it throws an OptionsValidationException.
  - Intent: Ensure fanout registration requires a non-empty schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L145](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L145)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlInbox_ThrowsForMissingConnectionString**
  - Summary: When AddSqlInbox is called with a missing connection string, then it throws an OptionsValidationException.
  - Intent: Ensure inbox registration validates required connection string settings.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L79](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L79)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlInbox_ThrowsForMissingSchemaName**
  - Summary: When AddSqlInbox is called with a missing schema name, then it throws an OptionsValidationException.
  - Intent: Ensure inbox registration requires a non-empty schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L95](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L95)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlInbox_ThrowsForZeroCleanupInterval**
  - Summary: When AddSqlInbox is called with cleanup enabled and a zero interval, then it throws an OptionsValidationException.
  - Intent: Validate inbox cleanup interval must be greater than zero when enabled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L43](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L43)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlOutbox_ThrowsForMissingConnectionString**
  - Summary: When AddSqlOutbox is called with a missing connection string, then it throws an OptionsValidationException.
  - Intent: Ensure outbox registration validates required connection string settings.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L27](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L27)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlOutbox_ThrowsForMissingSchemaName**
  - Summary: When AddSqlOutbox is called with a missing schema name, then it throws an OptionsValidationException.
  - Intent: Ensure outbox registration requires a non-empty schema name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L112](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L112)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OptionsValidationTests.AddSqlOutbox_ThrowsForZeroCleanupInterval**
  - Summary: When AddSqlOutbox is called with cleanup enabled and a zero interval, then it throws an OptionsValidationException.
  - Intent: Validate outbox cleanup interval must be greater than zero when enabled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L61](tests/Incursa.Platform.SqlServer.Tests/OptionsValidationTests.cs#L61)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxCleanupTests.CleanupService_GracefullyHandles_MissingStoredProcedure**
  - Summary: When the cleanup stored procedure is missing, then the cleanup service runs without crashing.
  - Intent: Ensure the outbox cleanup service tolerates missing schema deployment.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L221](tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L221)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxCleanupTests.Cleanup_DeletesOldProcessedMessages**
  - Summary: When cleanup runs with a retention window, then only processed outbox rows older than the window are deleted.
  - Intent: Verify the outbox cleanup procedure removes stale processed rows.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L45](tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L45)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxCleanupTests.Cleanup_RespectsRetentionPeriod**
  - Summary: When cleanup runs with a 10-day retention period, then only rows older than 10 days are deleted.
  - Intent: Confirm retention period filtering for outbox cleanup.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L163](tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L163)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxCleanupTests.Cleanup_WithNoOldMessages_DeletesNothing**
  - Summary: When cleanup runs and no processed rows are older than retention, then nothing is deleted.
  - Intent: Ensure cleanup is a no-op when no rows qualify for deletion.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L122](tests/Incursa.Platform.SqlServer.Tests/OutboxCleanupTests.cs#L122)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxExtensionsTests.EnqueueJoinWaitAsync_WithAllParameters_EnqueuesCorrectMessage**
  - Summary: When EnqueueJoinWaitAsync is called with all parameters, then the join.wait payload persists those values.
  - Intent: Verify join wait enqueue serializes all provided topics, payloads, and flags.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxExtensionsTests.cs#L66](tests/Incursa.Platform.SqlServer.Tests/OutboxExtensionsTests.cs#L66)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxExtensionsTests.EnqueueJoinWaitAsync_WithFailIfAnyStepFailedFalse_EnqueuesCorrectMessage**
  - Summary: When failIfAnyStepFailed is false, then the payload preserves the false flag and provided completion topic.
  - Intent: Ensure the fail-if-any-step flag is stored as provided.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxExtensionsTests.cs#L141](tests/Incursa.Platform.SqlServer.Tests/OutboxExtensionsTests.cs#L141)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxExtensionsTests.EnqueueJoinWaitAsync_WithMinimalParameters_EnqueuesCorrectMessage**
  - Summary: When EnqueueJoinWaitAsync is called with only a join id, then defaults are applied in the payload.
  - Intent: Confirm minimal arguments still produce a valid join.wait payload.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxExtensionsTests.cs#L108](tests/Incursa.Platform.SqlServer.Tests/OutboxExtensionsTests.cs#L108)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_DefaultBackoff_ExponentialWithJitter**
  - Summary: When DefaultBackoff is computed for increasing attempts, then delays grow with jitter and are capped.
  - Intent: Verify the default backoff function uses exponential growth with jitter bounds.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L398](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L398)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_HandlerThrows_ReschedulesWithBackoff**
  - Summary: When a handler throws, then the dispatcher reschedules the message with a backoff delay.
  - Intent: Verify failing handlers trigger reschedule with an error message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L177](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L177)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_LogsAtCorrectLevels**
  - Summary: When processing both a handled and an unhandled message, then logs are emitted at expected levels.
  - Intent: Validate dispatcher logging includes information, debug, and warning entries.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L329](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L329)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_LogsCorrectly**
  - Summary: When a message is processed successfully, then the dispatcher completes and dispatches it.
  - Intent: Confirm the successful path results in handler execution and dispatch.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L255](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L255)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_LogsErrors_WhenHandlerFails**
  - Summary: When a handler fails, then the dispatcher records an error and reschedules the message.
  - Intent: Ensure handler exceptions result in reschedule entries with errors.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L292](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L292)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_NoHandler_MarksAsFailed**
  - Summary: When no handler exists for a message topic, then the dispatcher marks the message as failed.
  - Intent: Ensure unknown topics fail fast instead of being rescheduled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L144](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L144)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_ProcessSingleMessage_Success**
  - Summary: When a single outbox message has a matching handler, then it is processed and dispatched.
  - Intent: Verify successful message handling marks the item as dispatched.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L109](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L109)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.MultiOutboxDispatcher_WithPoisonMessage_FailsWhenMaxAttemptsReached**
  - Summary: When a message hits max attempts, then the dispatcher fails it instead of rescheduling.
  - Intent: Ensure poison messages are failed when retries are exhausted.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L216](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L216)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.OutboxHandlerResolver_CaseInsensitive**
  - Summary: When handler topics are looked up with different casing, then the resolver still matches them.
  - Intent: Ensure topic matching is case-insensitive.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L90](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L90)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.OutboxHandlerResolver_WithHandlers_ResolvesCorrectly**
  - Summary: When the resolver is given handlers, then it resolves matching topics and rejects unknown ones.
  - Intent: Validate handler lookup works for registered topics.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L63](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L63)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.ServiceCollection_AddOutboxHandler_Factory_RegistersHandler**
  - Summary: When AddOutboxHandler is called with a factory, then it registers a singleton IOutboxHandler factory.
  - Intent: Confirm DI registration for factory-based handler creation.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L449](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L449)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxHandlerTests.ServiceCollection_AddOutboxHandler_RegistersHandler**
  - Summary: When AddOutboxHandler is called with a handler type, then it registers a singleton IOutboxHandler.
  - Intent: Confirm DI registration for handler types.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L428](tests/Incursa.Platform.SqlServer.Tests/OutboxHandlerTests.cs#L428)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.AttachMessageToJoinAsync_CalledTwice_IsIdempotent**
  - Summary: When attaching the same message twice, then only one join-member row exists.
  - Intent: Ensure attaching a message is idempotent.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L192](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L192)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.AttachMessageToJoinAsync_WithValidIds_CreatesAssociation**
  - Summary: When attaching an outbox message to a join, then a join-member row is created.
  - Intent: Verify join-member mappings are persisted.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L160](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L160)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.CompleteJoinWorkflow_WithAllStepsCompleted_WorksCorrectly**
  - Summary: When all steps complete and status is set to Completed, then the join shows all completed and no failures.
  - Intent: Verify end-to-end completion updates counts and status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L356](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L356)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.CompleteJoinWorkflow_WithSomeStepsFailed_WorksCorrectly**
  - Summary: When some steps fail and status is set to Failed, then the join records completed and failed counts.
  - Intent: Verify mixed completion and failure tracking.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L404](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L404)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.CreateJoinAsync_WithValidParameters_CreatesJoin**
  - Summary: When creating a join with tenant, expected steps, and metadata, then the join is pending with zero counts.
  - Intent: Verify CreateJoinAsync persists default join state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L83](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L83)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.GetJoinAsync_WithExistingJoin_ReturnsJoin**
  - Summary: When a join exists, then GetJoinAsync returns it with the expected steps.
  - Intent: Ensure joins can be retrieved by id.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L116](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L116)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.GetJoinAsync_WithNonExistentJoin_ReturnsNull**
  - Summary: When a join id is unknown, then GetJoinAsync returns null.
  - Intent: Confirm missing joins return no result.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L141](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L141)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.GetJoinMessagesAsync_WithMultipleMessages_ReturnsAllMessageIds**
  - Summary: When multiple messages are attached to a join, then GetJoinMessagesAsync returns all message ids.
  - Intent: Ensure join-member retrieval returns every attached message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L322](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L322)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementCompletedAsync_CalledTwiceForSameMessage_IsIdempotent**
  - Summary: When IncrementCompletedAsync is called twice for the same message, then the completed count increases only once.
  - Intent: Ensure completed increments are idempotent per message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L445](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L445)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementCompletedAsync_WhenTotalWouldExceedExpected_DoesNotOverCount**
  - Summary: When completed increments exceed expected steps, then the completed count stops at the expected total.
  - Intent: Ensure completed steps are capped by expected steps.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L501](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L501)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementCompletedAsync_WithValidMessage_IncrementsCount**
  - Summary: When a joined message is marked completed, then CompletedSteps increments and FailedSteps stays zero.
  - Intent: Verify completed step increments update the join counters.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L229](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L229)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementFailedAsync_CalledTwiceForSameMessage_IsIdempotent**
  - Summary: When IncrementFailedAsync is called twice for the same message, then the failed count increases only once.
  - Intent: Ensure failed increments are idempotent per message.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L473](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L473)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.IncrementFailedAsync_WithValidMessage_IncrementsCount**
  - Summary: When a joined message is marked failed, then FailedSteps increments and CompletedSteps stays zero.
  - Intent: Verify failed step increments update the join counters.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L261](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L261)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.OutboxAck_AutomaticallyReportsJoinCompletion**
  - Summary: When outbox messages are acknowledged, then join completed counts increment per message.
  - Intent: Verify outbox ack integration updates join progress.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L538](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L538)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.OutboxAck_MultipleAcksForSameMessage_IsIdempotent**
  - Summary: When the same message is acknowledged twice, then the join completed count does not increment again.
  - Intent: Ensure duplicate acks do not double-count join completion.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L620](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L620)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.OutboxFail_AutomaticallyReportsJoinFailure**
  - Summary: When an outbox message is failed, then join failure count increments alongside completed work.
  - Intent: Verify outbox failure integration updates join failure counts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L582](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L582)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxJoinTests.UpdateStatusAsync_WithValidStatus_UpdatesJoinStatus**
  - Summary: When updating join status, then the stored join status changes to the new value.
  - Intent: Verify UpdateStatusAsync persists status changes.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L293](tests/Incursa.Platform.SqlServer.Tests/OutboxJoinTests.cs#L293)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterIntegrationTests.DynamicDiscovery_RoutesToCorrectDatabase**
  - Summary: When dynamic discovery loads tenants, then the router resolves distinct outboxes per tenant.
  - Intent: Validate dynamic discovery works with outbox routing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterIntegrationTests.cs#L91](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterIntegrationTests.cs#L91)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterIntegrationTests.MultiTenantScenario_CreateMessagesInDifferentDatabases**
  - Summary: When tenant keys are routed, then each key resolves to a distinct outbox instance.
  - Intent: Demonstrate multi-tenant routing for configured outbox stores.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterIntegrationTests.cs#L46](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterIntegrationTests.cs#L46)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterIntegrationTests.TypicalApplicationUsage_DemonstratesPattern**
  - Summary: When a typical application requests outboxes by tenant, then it receives distinct tenant outboxes.
  - Intent: Illustrate the routing pattern used by application services.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterIntegrationTests.cs#L139](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterIntegrationTests.cs#L139)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.DynamicProvider_AfterRefresh_NewOutboxIsAvailable**
  - Summary: When discovery is refreshed after adding a tenant, then the new outbox becomes available.
  - Intent: Ensure provider refresh picks up newly discovered databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L241](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L241)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.DynamicProvider_GetOutboxByKey_ReturnsCorrectOutbox**
  - Summary: When dynamic discovery is used, then routing returns distinct outboxes per discovered tenant.
  - Intent: Verify DynamicOutboxStoreProvider works with the router after discovery.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L190](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L190)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.GetOutbox_GuidKeyConvertsToString_ReturnsOutbox**
  - Summary: When a Guid key does not match any configured identifier, then GetOutbox throws with the key in the message.
  - Intent: Verify Guid-based lookup reports missing identifiers clearly.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L321](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L321)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.GetOutbox_MultipleCallsForSameKey_ReturnsSameInstance**
  - Summary: When GetOutbox is called multiple times for the same key, then it returns the same instance.
  - Intent: Confirm outbox instances are cached per key.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L289](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L289)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.GetOutbox_WithEmptyKey_ThrowsArgumentException**
  - Summary: When an empty key is provided, then GetOutbox throws an ArgumentException.
  - Intent: Validate input guarding for outbox routing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L164](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L164)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.GetOutbox_WithGuidKey_ReturnsOutbox**
  - Summary: When a Guid tenant key is requested, then the router resolves the matching outbox.
  - Intent: Validate Guid overload routes by converting to string identifier.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L81](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L81)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.GetOutbox_WithNonExistentKey_ThrowsInvalidOperationException**
  - Summary: When an unknown tenant key is requested, then the router throws an InvalidOperationException.
  - Intent: Ensure the router fails for missing outbox keys.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L111](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L111)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.GetOutbox_WithNullKey_ThrowsArgumentException**
  - Summary: When a null key is provided, then GetOutbox throws an ArgumentException.
  - Intent: Validate input guarding for outbox routing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L138](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L138)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxRouterTests.GetOutbox_WithStringKey_ReturnsOutbox**
  - Summary: When configured tenant keys are requested, then distinct outbox instances are returned.
  - Intent: Verify routing by string key across multiple configured outbox stores.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L43](tests/Incursa.Platform.SqlServer.Tests/OutboxRouterTests.cs#L43)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.ConcurrentClaim_MultipleWorkers_NoOverlap**
  - Summary: When two workers claim concurrently, then the claimed sets do not overlap.
  - Intent: Validate exclusive claiming across concurrent workers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L175](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L175)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.InvalidOwnerOperations_DoNotAffectItems**
  - Summary: When a non-owner tries to acknowledge items, then the items remain InProgress.
  - Intent: Ensure owner token enforcement prevents unauthorized updates.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L203](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L203)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxAbandon_WithValidOwner_ReturnsToReady**
  - Summary: When AbandonAsync is called by the owner, then outbox items return to Ready status.
  - Intent: Ensure abandoned items are made available for reprocessing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L115](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L115)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxAck_WithValidOwner_MarksDoneAndProcessed**
  - Summary: When AckAsync is called by the owner, then outbox items are marked Done and processed.
  - Intent: Verify successful acknowledgements update outbox status and processed flag.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L95](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L95)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxClaim_WithBatchSize_RespectsLimit**
  - Summary: When ClaimAsync is called with a batch size, then it limits the number of claimed ids.
  - Intent: Ensure batch size is respected in outbox claims.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L77](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L77)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxClaim_WithReadyItems_ReturnsClaimedIds**
  - Summary: When ready outbox items exist, then ClaimAsync returns their ids.
  - Intent: Verify work-queue claims return the ready items.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L57](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L57)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxFail_WithValidOwner_MarksAsFailed**
  - Summary: When FailAsync is called by the owner, then outbox items are marked Failed.
  - Intent: Verify failure paths update status correctly.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L134](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L134)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkQueueTests.OutboxReapExpired_WithExpiredItems_ReturnsToReady**
  - Summary: When leases expire, then ReapExpiredAsync returns items to Ready status.
  - Intent: Ensure expired claims are reaped and made available again.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L153](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkQueueTests.cs#L153)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Manual_AbandonOperation_Works**
  - Summary: When AbandonAsync is called manually, then claimed items return to Ready.
  - Intent: Ensure manual abandon resets outbox item state.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L183](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L183)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_ConcurrentClaims_NoOverlap**
  - Summary: When multiple workers claim concurrently, then no outbox item is claimed more than once.
  - Intent: Validate concurrency safety of the claim operation.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L320](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L320)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_EmptyIdLists_NoErrors**
  - Summary: When AckAsync, AbandonAsync, or FailAsync are called with empty id lists, then they complete without error.
  - Intent: Verify empty batch operations are safe no-ops.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L303](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L303)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_IdempotentOperations_NoErrors**
  - Summary: When AckAsync is called multiple times for the same items, then no errors occur and status remains Done.
  - Intent: Verify acknowledgements are idempotent.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L262](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L262)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_LeaseExpiration_AllowsReclaim**
  - Summary: When a claim lease expires and is reaped, then another owner can reclaim the item.
  - Intent: Verify lease expiration allows subsequent claims.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L204](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L204)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_RestartUsesNewOwnerTokenAfterReap**
  - Summary: When a lease is reaped and re-claimed, then the new owner token is persisted.
  - Intent: Ensure owner token updates after lease expiration and re-claim.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L234](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L234)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.WorkQueue_UnauthorizedOwner_CannotModify**
  - Summary: When a non-owner tries to acknowledge items, then the items remain InProgress.
  - Intent: Ensure owner token enforcement prevents unauthorized modifications.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L283](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L283)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_ClaimsItemsCorrectly**
  - Summary: When items are claimed directly, then they enter InProgress and the claims match existing ids.
  - Intent: Validate ClaimAsync returns known items and updates status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L162](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L162)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_ProcessesClaimedItems_AndAcknowledgesThem**
  - Summary: When the worker processes claimed items, then it acknowledges them and they become Done.
  - Intent: Validate the outbox worker completes and acknowledges messages.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L110](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L110)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_RespectsCancellationToken**
  - Summary: When cancellation is requested, then the worker stops promptly.
  - Intent: Ensure the outbox worker cooperates with cancellation tokens.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L348](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L348)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.OutboxWorkerTests.Worker_WithProcessingFailure_AbandonsItems**
  - Summary: When the worker fails to process items, then it abandons them back to Ready.
  - Intent: Ensure failures result in abandon operations rather than acknowledgements.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L136](tests/Incursa.Platform.SqlServer.Tests/OutboxWorkerTests.cs#L136)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformFeatureAdapterTests.AddPlatformFanout_RegistersPlatformProvider**
  - Summary: When AddPlatformFanout is registered, then the fanout repository provider resolves as the platform implementation.
  - Intent: Confirm platform fanout registration binds the provider to the platform adapter.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L78](tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L78)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformFeatureAdapterTests.AddPlatformInbox_RegistersPlatformProvider**
  - Summary: When AddPlatformInbox is registered, then the inbox work store provider resolves as the platform implementation.
  - Intent: Confirm platform inbox registration binds the provider to the platform adapter.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L44](tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L44)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformFeatureAdapterTests.AddPlatformLeases_RegistersPlatformProvider**
  - Summary: When AddPlatformLeases is registered, then the lease factory provider resolves as the platform implementation.
  - Intent: Confirm platform lease registration binds the provider to the platform adapter.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L95](tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L95)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformFeatureAdapterTests.AddPlatformOutbox_RegistersPlatformProvider**
  - Summary: When AddPlatformOutbox is registered, then the outbox store provider resolves as the platform implementation.
  - Intent: Confirm platform outbox registration binds the provider to the platform adapter.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L27](tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L27)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformFeatureAdapterTests.AddPlatformScheduler_RegistersPlatformProvider**
  - Summary: When AddPlatformScheduler is registered, then the scheduler store provider resolves as the platform implementation.
  - Intent: Confirm platform scheduler registration binds the provider to the platform adapter.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L61](tests/Incursa.Platform.SqlServer.Tests/PlatformFeatureAdapterTests.cs#L61)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformLifecycleServiceTests.StartAsync_WithDynamicDiscoveryAndControlPlane_AndNoDatabases_DoesNotThrowException**
  - Summary: When dynamic discovery uses a control plane and no app databases exist yet, then StartAsync fails for control plane validation rather than missing databases.
  - Intent: Ensure control plane validation is reported distinctly from discovery emptiness.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L104](tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L104)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformLifecycleServiceTests.StartAsync_WithDynamicDiscovery_AndNoDatabases_DoesNotThrowException**
  - Summary: When dynamic discovery is enabled and startup does not require databases, then StartAsync completes without throwing.
  - Intent: Allow zero databases at startup for dynamic discovery.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L37](tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L37)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformLifecycleServiceTests.StartAsync_WithDynamicDiscovery_AndOneDatabase_Succeeds**
  - Summary: When dynamic discovery returns at least one database, then StartAsync completes without throwing.
  - Intent: Allow startup with dynamic discovery when a database is discoverable.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L143](tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L143)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformLifecycleServiceTests.StartAsync_WithListBasedDiscovery_AndNoDatabases_ThrowsException**
  - Summary: When list-based discovery requires databases but none are found, then StartAsync throws with a missing database message.
  - Intent: Enforce startup database requirements for list-based discovery.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L69](tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L69)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformLifecycleServiceTests.StartAsync_WithListBasedDiscovery_AndOneDatabase_Succeeds**
  - Summary: When list-based discovery provides at least one database, then StartAsync completes without throwing.
  - Intent: Allow startup with list-based discovery when a database is configured.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L183](tests/Incursa.Platform.SqlServer.Tests/PlatformLifecycleServiceTests.cs#L183)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndDiscovery_ThrowsWhenDirectInboxStoreRegistered**
  - Summary: When control-plane discovery registration finds a direct IInboxWorkStore registration, then it throws an InvalidOperationException.
  - Intent: Prevent mixing direct inbox store registrations with platform discovery mode.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L248](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L248)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndDiscovery_ThrowsWhenDirectOutboxRegistered**
  - Summary: When control-plane discovery registration finds a direct IOutbox registration, then it throws an InvalidOperationException.
  - Intent: Ensure direct outbox services are not registered alongside platform discovery.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L272](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L272)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithControlPlaneAndDiscovery_ThrowsWhenDirectOutboxStoreRegistered**
  - Summary: When control-plane discovery registration finds a direct IOutboxStore registration, then it throws an InvalidOperationException.
  - Intent: Prevent mixing direct outbox store registrations with platform discovery mode.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L224](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L224)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithDiscovery_RegistersRequiredServices**
  - Summary: When AddSqlPlatformMultiDatabaseWithDiscovery is used, then configuration is set for discovery-based multi-database mode.
  - Intent: Verify discovery-based registration flips the UsesDiscovery flag.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L154](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L154)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithList_CalledTwice_ThrowsException**
  - Summary: When AddSqlPlatformMultiDatabaseWithList is called twice, then it throws an InvalidOperationException.
  - Intent: Prevent duplicate multi-database list registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L64](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L64)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithList_DuplicateNames_ThrowsException**
  - Summary: When AddSqlPlatformMultiDatabaseWithList receives duplicate database names, then it throws an ArgumentException.
  - Intent: Ensure database identifiers are unique in list-based registration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L134](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L134)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithList_EmptyList_ThrowsException**
  - Summary: When AddSqlPlatformMultiDatabaseWithList receives an empty list, then it throws an ArgumentException.
  - Intent: Guard against registering multi-database services without any databases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L116](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L116)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithList_RegistersRequiredServices**
  - Summary: When multiple databases are registered via AddSqlPlatformMultiDatabaseWithList, then platform configuration and discovery are registered.
  - Intent: Ensure list-based registration sets multi-database configuration without discovery mode.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L88](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L88)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.AddSqlPlatformMultiDatabaseWithList_SingleDatabase_RegistersRequiredServices**
  - Summary: When a single database is registered via AddSqlPlatformMultiDatabaseWithList, then core configuration and time abstractions are registered.
  - Intent: Verify the multi-database list registration sets configuration, discovery, and timing services.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L29](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L29)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.PlatformRegistrationTests.ListBasedDatabaseDiscovery_ReturnsConfiguredDatabasesAsync**
  - Summary: When ListBasedDatabaseDiscovery is queried, then it returns the configured databases as-is.
  - Intent: Confirm list-based discovery surfaces the configured database metadata.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L177](tests/Incursa.Platform.SqlServer.Tests/PlatformRegistrationTests.cs#L177)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SchedulerRouterTests.SchedulerRouter_WithGuidKey_ReturnsSchedulerClient**
  - Summary: When a Guid key is requested, then the router returns a scheduler client for the matching identifier string.
  - Intent: Verify Guid overload routes by string conversion.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L133](tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L133)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SchedulerRouterTests.SchedulerRouter_WithInvalidKey_ThrowsException**
  - Summary: When an unknown scheduler key is requested, then the router throws an InvalidOperationException.
  - Intent: Ensure invalid identifiers fail fast when no scheduler is configured.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L77](tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L77)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SchedulerRouterTests.SchedulerRouter_WithNullKey_ThrowsException**
  - Summary: When an empty scheduler key is requested, then the router throws an ArgumentException.
  - Intent: Validate key input guarding for scheduler routing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L105](tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L105)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SchedulerRouterTests.SchedulerRouter_WithValidKey_ReturnsSchedulerClient**
  - Summary: When a known scheduler key is requested, then the router returns a scheduler client.
  - Intent: Verify routing to a configured scheduler store by string key.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L40](tests/Incursa.Platform.SqlServer.Tests/SchedulerRouterTests.cs#L40)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SchemaVersionSnapshotTests.SchemaVersions_MatchSnapshot**
  - Summary: When the schema snapshot is captured, then it matches the stored snapshot file.
  - Intent: Verify schema version snapshots remain consistent across runs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SchemaVersionSnapshotTests.cs#L27](tests/Incursa.Platform.SqlServer.Tests/SchemaVersionSnapshotTests.cs#L27)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlAuditAdapterTests.WriteAndQueryByAnchorRoundTrip**
  - Summary: When write And Query By Anchor Round Trip, then it behaves as expected.
  - Intent: Document expected behavior for write And Query By Anchor Round Trip.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlAuditAdapterTests.cs#L43](tests/Incursa.Platform.SqlServer.Tests/SqlAuditAdapterTests.cs#L43)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlEmailOutboxStoreTests.Dequeue_ReturnsPendingItemsInOrder**
  - Summary: When dequeue Returns Pending Items In Order, then it behaves as expected.
  - Intent: Document expected behavior for dequeue Returns Pending Items In Order.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlEmailOutboxStoreTests.cs#L85](tests/Incursa.Platform.SqlServer.Tests/SqlEmailOutboxStoreTests.cs#L85)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlEmailOutboxStoreTests.Enqueue_IsIdempotentForProviderAndMessageKey**
  - Summary: When enqueue Is Idempotent For Provider And Message Key, then it behaves as expected.
  - Intent: Document expected behavior for enqueue Is Idempotent For Provider And Message Key.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlEmailOutboxStoreTests.cs#L121](tests/Incursa.Platform.SqlServer.Tests/SqlEmailOutboxStoreTests.cs#L121)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlEmailOutboxStoreTests.Enqueue_MarksMessageKey**
  - Summary: When enqueue Marks Message Key, then it behaves as expected.
  - Intent: Document expected behavior for enqueue Marks Message Key.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlEmailOutboxStoreTests.cs#L59](tests/Incursa.Platform.SqlServer.Tests/SqlEmailOutboxStoreTests.cs#L59)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.AlreadyProcessedAsync_WithHash_StoresHashCorrectly**
  - Summary: When AlreadyProcessedAsync is called with a hash, then the hash is persisted in the inbox row.
  - Intent: Verify the optional hash is stored for deduplication checks.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L219](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L219)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.AlreadyProcessedAsync_WithInvalidMessageId_ThrowsArgumentException**
  - Summary: When an invalid message id is provided, then AlreadyProcessedAsync throws an ArgumentException.
  - Intent: Ensure inbox checks validate message id inputs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L248](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L248)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.AlreadyProcessedAsync_WithInvalidSource_ThrowsArgumentException**
  - Summary: When an invalid source is provided, then AlreadyProcessedAsync throws an ArgumentException.
  - Intent: Ensure inbox checks validate source inputs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L265](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L265)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.AlreadyProcessedAsync_WithNewMessage_ReturnsFalseAndRecordsMessage**
  - Summary: When a new message id is checked, then AlreadyProcessedAsync returns false and records it.
  - Intent: Verify first-time inbox checks persist the message record.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L37](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L37)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.AlreadyProcessedAsync_WithProcessedMessage_ReturnsTrue**
  - Summary: When a message has been marked processed, then AlreadyProcessedAsync returns true.
  - Intent: Confirm processed messages are reported as already processed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L66](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L66)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.ConcurrentAlreadyProcessedAsync_WithSameMessage_HandledCorrectly**
  - Summary: When AlreadyProcessedAsync is called concurrently for the same message, then one row is created and attempts increment.
  - Intent: Ensure concurrent checks remain idempotent and track attempts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L177](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L177)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.MarkDeadAsync_UpdatesStatus**
  - Summary: When MarkDeadAsync is called, then the message status becomes Dead.
  - Intent: Confirm dead-lettering updates the status field.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L148](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L148)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.MarkProcessedAsync_SetsProcessedUtcAndStatus**
  - Summary: When MarkProcessedAsync is called, then ProcessedUtc is set and status becomes Done.
  - Intent: Verify processed state updates both timestamp and status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L89](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L89)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlInboxServiceTests.MarkProcessingAsync_UpdatesStatus**
  - Summary: When MarkProcessingAsync is called, then the message status becomes Processing.
  - Intent: Confirm processing state transitions update the status field.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L119](tests/Incursa.Platform.SqlServer.Tests/SqlInboxServiceTests.cs#L119)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOperationAdapterTests.StartUpdateCompleteRoundTrip**
  - Summary: When start Update Complete Round Trip, then it behaves as expected.
  - Intent: Document expected behavior for start Update Complete Round Trip.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOperationAdapterTests.cs#L44](tests/Incursa.Platform.SqlServer.Tests/SqlOperationAdapterTests.cs#L44)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOperationAdapterTests.WatcherFindsAndMarksStalled**
  - Summary: When watcher Finds And Marks Stalled, then it behaves as expected.
  - Intent: Document expected behavior for watcher Finds And Marks Stalled.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOperationAdapterTests.cs#L98](tests/Incursa.Platform.SqlServer.Tests/SqlOperationAdapterTests.cs#L98)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.Constructor_CreatesInstance**
  - Summary: When constructing the outbox service, then it provides an IOutbox implementation.
  - Intent: Verify SqlOutboxService instantiation succeeds.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L49](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L49)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_MultipleMessages_AllInsertedSuccessfully**
  - Summary: When enqueueing multiple messages in one transaction, then all rows are inserted.
  - Intent: Verify batch inserts within a transaction.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L228](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L228)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_Standalone_EnsuresTableExists**
  - Summary: When standalone enqueue targets a missing table, then the table is created and the message is inserted.
  - Intent: Ensure standalone enqueue creates the outbox table if needed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L391](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L391)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_Standalone_MultipleMessages_AllInsertedSuccessfully**
  - Summary: When enqueueing multiple standalone messages, then all rows are inserted.
  - Intent: Verify standalone enqueue handles multiple writes.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L349](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L349)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_Standalone_WithNullCorrelationId_InsertsMessageSuccessfully**
  - Summary: When standalone enqueue uses a null correlation id, then the message is inserted.
  - Intent: Allow null correlation ids in standalone enqueue.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L314](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L314)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_Standalone_WithValidParameters_InsertsMessageToDatabase**
  - Summary: When enqueueing without an explicit transaction, then the message is inserted.
  - Intent: Verify standalone enqueue creates an outbox record.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L277](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L277)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_WithCustomSchemaAndTable_InsertsMessageToCorrectTable**
  - Summary: When using custom schema and table options, then the message is inserted into that table.
  - Intent: Ensure custom outbox table routing is honored.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L98](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L98)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_WithNullCorrelationId_InsertsMessageSuccessfully**
  - Summary: When enqueueing with a null correlation id, then the message is still inserted.
  - Intent: Allow null correlation ids during transactional enqueue.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L150](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L150)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_WithNullTransaction_ThrowsNullReferenceException**
  - Summary: When the transaction is null, then EnqueueAsync throws ArgumentNullException.
  - Intent: Enforce a non-null transaction for transactional enqueue.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L257](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L257)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_WithValidParameters_InsertsMessageToDatabase**
  - Summary: When enqueueing with a transaction, then a matching outbox row is inserted.
  - Intent: Validate enqueue persists messages within a transaction.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L64](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L64)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxServiceTests.EnqueueAsync_WithValidParameters_SetsDefaultValues**
  - Summary: When enqueueing a message, then default outbox columns are initialized.
  - Intent: Verify insert defaults for processing metadata.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L183](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxServiceTests.cs#L183)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxStoreWhiteBoxTests.FailAsync_SetsFailureMetadata**
  - Summary: When fail Async Sets Failure Metadata, then it behaves as expected.
  - Intent: Document expected behavior for fail Async Sets Failure Metadata.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxStoreWhiteBoxTests.cs#L79](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxStoreWhiteBoxTests.cs#L79)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxStoreWhiteBoxTests.MarkDispatchedAsync_SetsProcessedFlags**
  - Summary: When mark Dispatched Async Sets Processed Flags, then it behaves as expected.
  - Intent: Document expected behavior for mark Dispatched Async Sets Processed Flags.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxStoreWhiteBoxTests.cs#L52](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxStoreWhiteBoxTests.cs#L52)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlOutboxStoreWhiteBoxTests.RescheduleAsync_IncrementsRetryCountAndSetsError**
  - Summary: When reschedule Async Increments Retry Count And Sets Error, then it behaves as expected.
  - Intent: Document expected behavior for reschedule Async Increments Retry Count And Sets Error.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlOutboxStoreWhiteBoxTests.cs#L108](tests/Incursa.Platform.SqlServer.Tests/SqlOutboxStoreWhiteBoxTests.cs#L108)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlPlatformRegistrationTests.AddSqlPlatform_RegistersCoreDependencies**
  - Summary: When AddSqlPlatform is called, core SQL Server storage dependencies should be registered.
  - Intent: Verify the all-at-once SQL Server registration wires the required services.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlPlatformRegistrationTests.cs#L31](tests/Incursa.Platform.SqlServer.Tests/SqlPlatformRegistrationTests.cs#L31)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.CancelTimerAsync_WithNonexistentTimerId_ReturnsFalse**
  - Summary: When cancelling a missing timer id, then CancelTimerAsync returns false.
  - Intent: Confirm cancel is a no-op for unknown timers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L212](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L212)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.CancelTimerAsync_WithValidTimerId_UpdatesTimerStatus**
  - Summary: When cancelling an existing timer, then CancelTimerAsync returns true and status is Cancelled.
  - Intent: Verify cancellation updates stored timer status.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L181](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L181)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.Constructor_WithValidConnectionString_CreatesInstance**
  - Summary: When constructing the scheduler client, then it provides an ISchedulerClient implementation.
  - Intent: Verify SqlSchedulerClient instantiation succeeds.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L47](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L47)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.CreateOrUpdateJobAsync_ExistingJob_UpdatesJob**
  - Summary: When a job already exists, then CreateOrUpdateJobAsync updates it without duplication.
  - Intent: Verify upsert behavior for existing jobs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L286](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L286)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.CreateOrUpdateJobAsync_WithNullPayload_InsertsJobSuccessfully**
  - Summary: When creating a job with a null payload, then the stored payload remains null.
  - Intent: Allow null payloads when defining jobs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L260](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L260)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.CreateOrUpdateJobAsync_WithValidParameters_InsertsJobToDatabase**
  - Summary: When creating a job, then a job row is inserted with name, topic, and cron schedule.
  - Intent: Validate CreateOrUpdateJobAsync persists new jobs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L230](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L230)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.DeleteJobAsync_WithValidJobName_RemovesJob**
  - Summary: When deleting an existing job, then the job row is removed.
  - Intent: Verify DeleteJobAsync removes jobs by name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L324](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L324)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.ScheduleTimerAsync_WithCustomTableNames_InsertsToCorrectTable**
  - Summary: When custom scheduler table names are used, then timers are stored in the custom table.
  - Intent: Ensure ScheduleTimerAsync honors custom table options.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L94](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L94)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.ScheduleTimerAsync_WithValidParameters_InsertsTimerToDatabase**
  - Summary: When scheduling a timer, then a timer row with the topic is inserted.
  - Intent: Validate ScheduleTimerAsync persists timers.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L63](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L63)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.ScheduleTimerAsync_WithValidParameters_SetsCorrectDefaults**
  - Summary: When scheduling a timer, then default timer columns are initialized.
  - Intent: Verify default status and metadata values on insert.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L146](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L146)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlSchedulerClientTests.TriggerJobAsync_WithValidJobName_CreatesJobRun**
  - Summary: When triggering a job, then a job run is created for that job.
  - Intent: Ensure TriggerJobAsync records a job run.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L352](tests/Incursa.Platform.SqlServer.Tests/SqlSchedulerClientTests.cs#L352)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SqlScriptDeploymentTests.SqlArtifacts_DeployInOrder**
  - Summary: When SQL artifacts are applied in order, then all scripts execute without errors.
  - Intent: Verify the ordered SQL script set can be deployed sequentially.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SqlScriptDeploymentTests.cs#L37](tests/Incursa.Platform.SqlServer.Tests/SqlScriptDeploymentTests.cs#L37)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_AfterLeaseReleased_CanAcquireAgain**
  - Summary: When a lease is released, then the resource can be acquired again with a higher fencing token.
  - Intent: Validate lease release frees the resource for subsequent acquisition.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L107](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L107)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_ReentrantWithSameOwnerToken_Succeeds**
  - Summary: When the same owner token acquires a lease twice, then both acquisitions succeed with increasing fencing tokens.
  - Intent: Validate re-entrant acquisition with the same owner token.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L237](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L237)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_SameResourceTwice_SecondCallReturnsNull**
  - Summary: When AcquireAsync is called twice for the same resource, then the second call returns null.
  - Intent: Ensure a lease cannot be acquired concurrently for the same resource.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L84](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L84)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_WithCustomOwnerToken_UsesProvidedToken**
  - Summary: When a custom owner token is provided, then the acquired lease uses that token.
  - Intent: Verify custom owner tokens are honored by AcquireAsync.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L212](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L212)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_WithDifferentResources_BothSucceed**
  - Summary: When acquiring leases for different resources, then both acquisitions succeed independently.
  - Intent: Ensure leases are isolated per resource name.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L184](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L184)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.AcquireAsync_WithValidResource_CanAcquireLease**
  - Summary: When a lease is acquired for a new resource, then a valid lease instance is returned.
  - Intent: Verify AcquireAsync produces a lease with expected identifiers and fencing token.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L59](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L59)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.ThrowIfLost_WhenLeaseIsValid_DoesNotThrow**
  - Summary: When a lease is still valid, then ThrowIfLost does not throw.
  - Intent: Verify lost-lease guard does not trigger for active leases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L163](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L163)
- **Incursa.Platform.SqlServer.Tests:Incursa.Platform.Tests.SystemLeaseTests.TryRenewNowAsync_WithValidLease_SucceedsAndIncrementsFencingToken**
  - Summary: When TryRenewNowAsync is called on an active lease, then it succeeds and increments the fencing token.
  - Intent: Ensure renewals advance the fencing token for valid leases.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L136](tests/Incursa.Platform.SqlServer.Tests/SystemLeaseTests.cs#L136)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.BuilderRegistersCachedCheck_WithOptionsPerName**
  - Summary: When a cached check is registered with per-name options, then the configured cache durations are honored.
  - Intent: Ensure AddCachedCheck applies custom options for the named check.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L152](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L152)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.BuilderRegistersDelegateBasedCachedCheck_WithCaching**
  - Summary: When a delegate-based cached check is registered, then caching reduces delegate invocations.
  - Intent: Validate AddCachedCheck with a delegate honors the healthy cache duration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L196](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L196)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.CachesDegradedResults_UntilDurationExpires**
  - Summary: When a degraded result is cached, then repeated checks within the degraded cache window reuse the result.
  - Intent: Verify degraded results are cached for the configured duration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L116](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L116)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.CachesHealthyResults_UntilDurationExpires**
  - Summary: When a healthy result is cached, then repeated checks within the cache window reuse the result.
  - Intent: Verify healthy results are cached for the configured duration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L40](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L40)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.OptionsValidator_AcceptsValidOptions**
  - Summary: When cache durations are non-negative, then validation succeeds.
  - Intent: Confirm valid CachedHealthCheckOptions pass validation.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L308](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L308)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.OptionsValidator_RejectsNegativeDegradedCacheDuration**
  - Summary: When DegradedCacheDuration is negative, then validation fails.
  - Intent: Enforce non-negative degraded cache durations.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L262](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L262)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.OptionsValidator_RejectsNegativeHealthyCacheDuration**
  - Summary: When HealthyCacheDuration is negative, then validation fails.
  - Intent: Enforce non-negative healthy cache durations.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L239](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L239)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.OptionsValidator_RejectsNegativeUnhealthyCacheDuration**
  - Summary: When UnhealthyCacheDuration is negative, then validation fails.
  - Intent: Enforce non-negative unhealthy cache durations.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L285](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L285)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.CachedHealthCheckTests.RechecksImmediately_WhenUnhealthy**
  - Summary: When an unhealthy result is returned with zero unhealthy cache duration, then the next check re-evaluates immediately.
  - Intent: Ensure unhealthy results do not get cached when configured for immediate rechecks.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L77](tests/Incursa.Platform.Tests/CachedHealthCheckTests.cs#L77)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.DrainFirstSelectionStrategyTests.SelectNext_MixedBehavior**
  - Summary: When processed counts vary across calls, then SelectNext sticks to busy stores and advances when empty.
  - Intent: Validate mixed drain-first behavior across multiple stores.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L110](tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L110)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.DrainFirstSelectionStrategyTests.SelectNext_MovesToNextStoreWhenNoMessagesProcessed**
  - Summary: When no messages are processed, then SelectNext advances to the next store.
  - Intent: Verify drain-first advances when a store has no work.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L83](tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L83)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.DrainFirstSelectionStrategyTests.SelectNext_SticksToSameStoreWhenMessagesProcessed**
  - Summary: When a store processes messages, then SelectNext keeps returning the same store.
  - Intent: Ensure drain-first strategy sticks to the current store while work is processed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L61](tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L61)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.DrainFirstSelectionStrategyTests.SelectNext_WithNoStores_ReturnsNull**
  - Summary: When SelectNext is called with no stores, then it returns null.
  - Intent: Verify drain-first selection handles empty inputs safely.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L43](tests/Incursa.Platform.Tests/DrainFirstSelectionStrategyTests.cs#L43)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.EngineRefactoringTests.Discovery_service_filters_engines**
  - Summary: When engines are listed and resolved with filters, then discovery returns the expected UI and webhook descriptors.
  - Intent: Validate engine discovery filtering and webhook resolution by provider and event.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L244](tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L244)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.EngineRefactoringTests.Ui_adapter_throws_when_engine_contract_is_mismatched**
  - Summary: When a UI adapter targets an engine with a non-UI contract, then ExecuteAsync throws.
  - Intent: Prevent UI adapters from invoking engines with mismatched contracts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L220](tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L220)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.EngineRefactoringTests.Ui_adapter_throws_when_engine_is_not_registered**
  - Summary: When a UI engine is not registered for the requested engine ID, then ExecuteAsync throws.
  - Intent: Ensure missing UI engines surface a clear error.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L196](tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L196)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.EngineRefactoringTests.Ui_engine_exception_propagates_to_adapter**
  - Summary: When the UI engine throws during execution, then the adapter propagates the exception.
  - Intent: Ensure engine exceptions are not swallowed by the adapter.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L174](tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L174)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.EngineRefactoringTests.Ui_engine_invocation_returns_view_model_and_navigation_tokens**
  - Summary: When the UI engine executes a valid login command, then it returns a view model and navigation tokens.
  - Intent: Verify UI engine execution returns expected view model data and navigation metadata.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L48](tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L48)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.EngineRefactoringTests.Webhook_pipeline_authenticates_and_dispatches**
  - Summary: When a webhook request has a valid event type, then the handler is invoked.
  - Intent: Verify webhook classification and handler dispatch for accepted requests.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L78](tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L78)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.EngineRefactoringTests.Webhook_pipeline_requires_event_type_header**
  - Summary: When the event type header is missing, then classification rejects the request.
  - Intent: Ensure webhook classification requires an explicit event type header.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L136](tests/Incursa.Platform.Tests/EngineRefactoringTests.cs#L136)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceExecutorTests.ExecuteAsync_PermanentFailure_CompletesIdempotency**
  - Summary: When execute Async Permanent Failure Completes Idempotency, then it behaves as expected.
  - Intent: Document expected behavior for execute Async Permanent Failure Completes Idempotency.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L92](tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L92)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceExecutorTests.ExecuteAsync_ProbeConfirmation_CompletesAfterFailure**
  - Summary: When execute Async Probe Confirmation Completes After Failure, then it behaves as expected.
  - Intent: Document expected behavior for execute Async Probe Confirmation Completes After Failure.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L111](tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L111)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceExecutorTests.ExecuteAsync_Success_CompletesIdempotency**
  - Summary: When execute Async Success Completes Idempotency, then it behaves as expected.
  - Intent: Document expected behavior for execute Async Success Completes Idempotency.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L54](tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L54)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceExecutorTests.ExecuteAsync_SuppressesDuplicateWithoutExecuting**
  - Summary: When execute Async Suppresses Duplicate Without Executing, then it behaves as expected.
  - Intent: Document expected behavior for execute Async Suppresses Duplicate Without Executing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L29](tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L29)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceExecutorTests.ExecuteAsync_TransientFailure_FailsIdempotency**
  - Summary: When execute Async Transient Failure Fails Idempotency, then it behaves as expected.
  - Intent: Document expected behavior for execute Async Transient Failure Fails Idempotency.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L73](tests/Incursa.Platform.Tests/ExactlyOnceExecutorTests.cs#L73)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceHandlerTests.InboxHandler_PermanentFailure_ThrowsPermanentException**
  - Summary: When inbox Handler Permanent Failure Throws Permanent Exception, then it behaves as expected.
  - Intent: Document expected behavior for inbox Handler Permanent Failure Throws Permanent Exception.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L87](tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L87)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceHandlerTests.InboxHandler_Suppressed_DoesNotExecute**
  - Summary: When inbox Handler Suppressed Does Not Execute, then it behaves as expected.
  - Intent: Document expected behavior for inbox Handler Suppressed Does Not Execute.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L101](tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L101)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceHandlerTests.InboxHandler_TransientFailure_ThrowsForRetry**
  - Summary: When inbox Handler Transient Failure Throws For Retry, then it behaves as expected.
  - Intent: Document expected behavior for inbox Handler Transient Failure Throws For Retry.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L74](tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L74)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceHandlerTests.OutboxHandler_PermanentFailure_ThrowsPermanentException**
  - Summary: When outbox Handler Permanent Failure Throws Permanent Exception, then it behaves as expected.
  - Intent: Document expected behavior for outbox Handler Permanent Failure Throws Permanent Exception.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L60](tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L60)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceHandlerTests.OutboxHandler_Suppressed_DoesNotExecute**
  - Summary: When outbox Handler Suppressed Does Not Execute, then it behaves as expected.
  - Intent: Document expected behavior for outbox Handler Suppressed Does Not Execute.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L30](tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L30)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExactlyOnceHandlerTests.OutboxHandler_TransientFailure_ThrowsForRetry**
  - Summary: When outbox Handler Transient Failure Throws For Retry, then it behaves as expected.
  - Intent: Document expected behavior for outbox Handler Transient Failure Throws For Retry.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L47](tests/Incursa.Platform.Tests/ExactlyOnceHandlerTests.cs#L47)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.ExceptionFilter_InRealCatchBlock_WorksCorrectly**
  - Summary: When IsCatchable is used in a real catch filter, then it catches the regular exception.
  - Intent: Demonstrate catch-filter usage with the exception filter.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L524](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L524)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.ExceptionFilter_WithCriticalException_DoesNotCatch**
  - Summary: When a critical exception is thrown, then the catch filter does not intercept it.
  - Intent: Ensure critical exceptions bypass catchable filters.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L556](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L556)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchableAndExpected_RealWorldScenario_SqlExceptions**
  - Summary: When evaluating a catchable SQL-like exception versus a critical one, then only the catchable exception returns true.
  - Intent: Demonstrate real-world filtering that excludes critical exceptions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L652](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L652)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchableAndExpected_WithCatchableAndExpected_ReturnsTrue**
  - Summary: When an exception is both catchable and expected, then IsCatchableAndExpected returns true.
  - Intent: Validate combined catchable and expected filtering logic.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L424](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L424)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchableAndExpected_WithCatchableButNotExpected_ReturnsFalse**
  - Summary: When an exception is catchable but not expected, then IsCatchableAndExpected returns false.
  - Intent: Ensure expected-type filtering is enforced even for catchable exceptions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L478](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L478)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchableAndExpected_WithCriticalButExpected_ReturnsFalse**
  - Summary: When an exception is critical even if expected, then IsCatchableAndExpected returns false.
  - Intent: Ensure critical exceptions are never treated as catchable.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L451](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L451)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchableAndExpected_WithNullException_ThrowsArgumentNullException**
  - Summary: When IsCatchableAndExpected is called with a null exception, then it throws ArgumentNullException.
  - Intent: Guard against null exception inputs for combined filtering.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L505](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L505)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchable_WithNullException_ThrowsArgumentNullException**
  - Summary: When IsCatchable is called with a null exception, then it throws ArgumentNullException.
  - Intent: Guard against null exception inputs.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L108](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L108)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchable_WithOutOfMemoryException_ReturnsFalse**
  - Summary: When IsCatchable is given an OutOfMemoryException, then it returns false.
  - Intent: Ensure critical exceptions are not marked catchable.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L58](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L58)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchable_WithRegularException_ReturnsTrue**
  - Summary: When IsCatchable is given a regular exception, then it returns true.
  - Intent: Verify non-critical exceptions are considered catchable.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L33](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L33)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchable_WithStackOverflowException_ReturnsFalse**
  - Summary: When IsCatchable is given a StackOverflowException, then it returns false.
  - Intent: Ensure stack overflow is treated as non-catchable.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L83](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L83)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCatchable_WithVariousCommonExceptions_ReturnsTrue**
  - Summary: When IsCatchable is evaluated for common exception types, then it returns true.
  - Intent: Validate catchable classification for typical application exceptions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L601](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L601)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCritical_WithNullException_ThrowsArgumentNullException**
  - Summary: When IsCritical is called with a null exception, then it throws ArgumentNullException.
  - Intent: Guard against null exception inputs for critical checks.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L203](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L203)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCritical_WithOutOfMemoryException_ReturnsTrue**
  - Summary: When IsCritical is given an OutOfMemoryException, then it returns true.
  - Intent: Classify out-of-memory conditions as critical.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L128](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L128)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCritical_WithRegularException_ReturnsFalse**
  - Summary: When IsCritical is given a regular exception, then it returns false.
  - Intent: Ensure non-critical exceptions are not flagged as critical.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L178](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L178)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsCritical_WithStackOverflowException_ReturnsTrue**
  - Summary: When IsCritical is given a StackOverflowException, then it returns true.
  - Intent: Classify stack overflow conditions as critical.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L153](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L153)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithDerivedType_ReturnsTrue**
  - Summary: When IsExpected is given a derived exception and a base expected type, then it returns true.
  - Intent: Confirm base expected types match derived exceptions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L277](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L277)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithEmptyExpectedTypes_ReturnsFalse**
  - Summary: When IsExpected is called with no expected types, then it returns false.
  - Intent: Ensure empty expected type lists do not match any exception.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L370](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L370)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithMatchingType_ReturnsTrue**
  - Summary: When IsExpected is given a matching exception type, then it returns true.
  - Intent: Confirm exact type matches are treated as expected.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L223](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L223)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithMultipleTypesAndMatch_ReturnsTrue**
  - Summary: When IsExpected is given multiple expected types including a base type, then it returns true for a derived exception.
  - Intent: Validate derived exceptions match any compatible expected type.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L248](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L248)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithNonMatchingType_ReturnsFalse**
  - Summary: When IsExpected is given a non-matching expected type, then it returns false.
  - Intent: Ensure unrelated exception types are not marked expected.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L302](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L302)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithNullException_ThrowsArgumentNullException**
  - Summary: When IsExpected is called with a null exception, then it throws ArgumentNullException.
  - Intent: Guard against null exception inputs for expected checks.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L327](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L327)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithNullExpectedTypes_ThrowsArgumentNullException**
  - Summary: When IsExpected is called with null expected types, then it throws ArgumentNullException.
  - Intent: Guard against null expected type arrays.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L347](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L347)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithNullTypeInArray_IgnoresNullAndContinues**
  - Summary: When IsExpected encounters null entries in expected types, then it ignores them and still matches valid types.
  - Intent: Verify null expected types do not break matching.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L395](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L395)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ExceptionFilterTests.IsExpected_WithOperationCanceledException_WorksCorrectly**
  - Summary: When IsExpected is given an OperationCanceledException and matching expected type, then it returns true.
  - Intent: Confirm cancellation exceptions are matched when expected.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L627](tests/Incursa.Platform.Tests/ExceptionFilterTests.cs#L627)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.FanoutSystemTests.FanoutDispatcher_ShouldCreateCorrectTopicName**
  - Summary: When a fanout topic name is constructed, then it follows the "fanout:{fanoutTopic}:{workKey}" convention.
  - Intent: Document the fanout topic naming pattern used by the dispatcher.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/FanoutSystemTests.cs#L71](tests/Incursa.Platform.Tests/FanoutSystemTests.cs#L71)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.FanoutSystemTests.FanoutSlice_ShouldSerializeCorrectly**
  - Summary: When a FanoutSlice is serialized and deserialized, then its fields are preserved.
  - Intent: Ensure FanoutSlice JSON round-trips correctly.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/FanoutSystemTests.cs#L35](tests/Incursa.Platform.Tests/FanoutSystemTests.cs#L35)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.FanoutSystemTests.FanoutTopicOptions_ShouldHaveCorrectDefaults**
  - Summary: When FanoutTopicOptions is created with a fanout topic, then its default scheduling values are set.
  - Intent: Verify default values for fanout scheduling configuration.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/FanoutSystemTests.cs#L94](tests/Incursa.Platform.Tests/FanoutSystemTests.cs#L94)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.InboxSelectionStrategyTests.DrainFirst_HandlesEmptyStoreList**
  - Summary: When the drain-first strategy is given no stores, then it returns null.
  - Intent: Ensure empty store lists are handled safely in drain-first selection.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L158](tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L158)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.InboxSelectionStrategyTests.DrainFirst_MovesToNextStoreWhenEmpty**
  - Summary: When a store processes zero messages, then the drain-first strategy advances to the next store.
  - Intent: Verify drain-first moves on when the current store is empty.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L127](tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L127)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.InboxSelectionStrategyTests.DrainFirst_ResetReturnsToFirstStore**
  - Summary: When Reset is called, then drain-first selection starts from the first store again.
  - Intent: Validate reset clears the drain-first cursor.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L176](tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L176)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.InboxSelectionStrategyTests.DrainFirst_StaysOnStoreWithMessages**
  - Summary: When messages are processed from a store, then the drain-first strategy stays on that store.
  - Intent: Ensure drain-first keeps selecting the active store while work is processed.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L101](tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L101)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.InboxSelectionStrategyTests.RoundRobin_CyclesThroughStoresEvenly**
  - Summary: When SelectNext is called repeatedly, then the round-robin strategy cycles through stores and wraps.
  - Intent: Verify round-robin selection advances in order across inbox stores.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L27](tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L27)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.InboxSelectionStrategyTests.RoundRobin_HandlesEmptyStoreList**
  - Summary: When the round-robin strategy is given no stores, then it returns null.
  - Intent: Ensure empty store lists are handled safely.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L57](tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L57)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.InboxSelectionStrategyTests.RoundRobin_ResetReturnsToFirstStore**
  - Summary: When Reset is called, then round-robin selection starts from the first store again.
  - Intent: Validate reset clears the round-robin cursor.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L75](tests/Incursa.Platform.Tests/InboxSelectionStrategyTests.cs#L75)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricAggregatorTests.Aggregator_Should_Calculate_Percentiles**
  - Summary: When a distribution of values is recorded, then percentile estimates are populated and within expected ranges.
  - Intent: Validate percentile calculation for a known 1..100 data set.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L86](tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L86)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricAggregatorTests.Aggregator_Should_Calculate_Sum_And_Count**
  - Summary: When values are recorded, then the snapshot returns the correct sum and count.
  - Intent: Verify aggregation totals across multiple recorded values.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L29](tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L29)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricAggregatorTests.Aggregator_Should_Handle_Empty_State**
  - Summary: When no values are recorded, then the snapshot reports zeros and null percentiles.
  - Intent: Verify the empty state snapshot uses default aggregate values.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L141](tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L141)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricAggregatorTests.Aggregator_Should_Reset_After_Snapshot**
  - Summary: When a snapshot is taken, then the aggregator resets its state for subsequent readings.
  - Intent: Ensure GetSnapshotAndReset clears accumulated values.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L117](tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L117)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricAggregatorTests.Aggregator_Should_Track_Last_Value**
  - Summary: When values are recorded, then the snapshot keeps the last recorded value.
  - Intent: Verify the aggregator tracks the most recent observation.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L68](tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L68)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricAggregatorTests.Aggregator_Should_Track_Min_And_Max**
  - Summary: When values are recorded, then the snapshot reports the minimum and maximum correctly.
  - Intent: Ensure min/max tracking reflects the recorded range.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L48](tests/Incursa.Platform.Tests/MetricAggregatorTests.cs#L48)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricRegistrarTests.IsTagAllowed_WithRegisteredMetricAndAllowedTag_ReturnsTrue**
  - Summary: When a registered metric allows a tag, then IsTagAllowed returns true.
  - Intent: Confirm allowed tags are honored for registered metrics.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L109](tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L109)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricRegistrarTests.IsTagAllowed_WithRegisteredMetricAndDisallowedTag_ReturnsFalse**
  - Summary: When a registered metric does not allow a tag, then IsTagAllowed returns false.
  - Intent: Ensure disallowed tags are rejected even for registered metrics.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L134](tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L134)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricRegistrarTests.IsTagAllowed_WithUnregisteredMetric_ReturnsFalse**
  - Summary: When a metric is not registered, then IsTagAllowed returns false for any tag.
  - Intent: Verify tag checks fail for unknown metrics.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L159](tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L159)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricRegistrarTests.RegisterRange_WithMultipleMetrics_AddsAllToRegistry**
  - Summary: When multiple metrics are registered in bulk, then all of them appear in the registry.
  - Intent: Verify RegisterRange registers each provided metric.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L81](tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L81)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricRegistrarTests.Register_WithDuplicateMetric_LogsWarning**
  - Summary: When the same metric is registered twice, then the registry keeps a single entry.
  - Intent: Ensure duplicate registration does not create duplicate entries.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L55](tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L55)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.MetricRegistrarTests.Register_WithValidMetric_AddsToRegistry**
  - Summary: When a valid metric is registered, then it appears in the registry.
  - Intent: Verify MetricRegistrar stores new metric registrations.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L29](tests/Incursa.Platform.Tests/MetricRegistrarTests.cs#L29)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ObservabilityRegistrationTests.AddPlatformObservability_AllowsConfiguration**
  - Summary: When AddPlatformObservability is configured, then the options reflect the provided settings.
  - Intent: Ensure custom observability options are bound into IOptions.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L52](tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L52)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ObservabilityRegistrationTests.AddPlatformObservability_RegistersRequiredServices**
  - Summary: When AddPlatformObservability is called, then watchdog services are registered in DI.
  - Intent: Verify basic observability wiring registers the watchdog and hosted service.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L29](tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L29)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ObservabilityRegistrationTests.ObservabilityBuilder_CanAddAlertSink**
  - Summary: When an alert sink is added via the builder, then it is registered for resolution.
  - Intent: Verify watchdog alert sinks can be registered through the builder.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L80](tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L80)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ObservabilityRegistrationTests.ObservabilityBuilder_CanAddHealthChecks**
  - Summary: When platform health checks are added via the builder, then the health check service is registered.
  - Intent: Confirm health check registration is wired through observability setup.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L127](tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L127)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ObservabilityRegistrationTests.ObservabilityBuilder_CanAddHeartbeatSink**
  - Summary: When a heartbeat sink is added via the builder, then it is registered for resolution.
  - Intent: Verify heartbeat sinks can be registered through the observability builder.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L105](tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L105)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ObservabilityRegistrationTests.WatchdogAlertContext_ContainsAllRequiredFields**
  - Summary: When a WatchdogAlertContext is created, then all supplied fields are preserved.
  - Intent: Verify alert context carries kind, component, timestamps, and attributes.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L150](tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L150)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.ObservabilityRegistrationTests.WatchdogSnapshot_ContainsAlerts**
  - Summary: When a WatchdogSnapshot is created with alerts, then those alerts are retained.
  - Intent: Ensure watchdog snapshots surface alert payloads and timestamps.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L184](tests/Incursa.Platform.Tests/ObservabilityRegistrationTests.cs#L184)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.OutboxMessageTests.OutboxMessage_IsPublicSealedRecord**
  - Summary: When OutboxMessage is inspected, then it is a public sealed record-like class.
  - Intent: Verify the OutboxMessage type characteristics (public, sealed, record semantics).
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/OutboxMessageTests.cs#L86](tests/Incursa.Platform.Tests/OutboxMessageTests.cs#L86)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.OutboxMessageTests.OutboxMessage_IsRecord_WithCorrectProperties**
  - Summary: When the OutboxMessage type is inspected, then it exposes the expected core properties.
  - Intent: Confirm the record exposes required outbox fields with correct types.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/OutboxMessageTests.cs#L26](tests/Incursa.Platform.Tests/OutboxMessageTests.cs#L26)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.OutboxMessageTests.OutboxMessage_Properties_HaveExpectedTypes**
  - Summary: When OutboxMessage properties are reflected, then each property has the expected CLR type.
  - Intent: Validate type metadata for outbox message properties.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/OutboxMessageTests.cs#L62](tests/Incursa.Platform.Tests/OutboxMessageTests.cs#L62)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.PlatformMetricCatalogTests.All_ContainsDlqMetrics**
  - Summary: When the platform metric catalog is enumerated, then it contains the expected DLQ metrics.
  - Intent: Verify that dead-letter queue metrics are registered in the catalog.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L109](tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L109)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.PlatformMetricCatalogTests.All_ContainsInboxMetrics**
  - Summary: When the platform metric catalog is enumerated, then it contains the expected inbox metrics.
  - Intent: Verify that inbox metrics are registered in the catalog.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L84](tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L84)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.PlatformMetricCatalogTests.All_ContainsOutboxMetrics**
  - Summary: When the platform metric catalog is enumerated, then it contains the expected outbox metrics.
  - Intent: Verify that outbox metrics are registered in the catalog.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L59](tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L59)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.PlatformMetricCatalogTests.All_CounterMetricsHaveCountUnit**
  - Summary: When counter metrics are selected from the catalog, then their units are count except for latency or age metrics.
  - Intent: Validate unit conventions for counter metrics.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L163](tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L163)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.PlatformMetricCatalogTests.All_HistogramMetricsHaveTimeUnits**
  - Summary: When histogram metrics are selected from the catalog, then their units are time-based.
  - Intent: Ensure histogram metrics report timing in milliseconds or seconds.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L195](tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L195)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.PlatformMetricCatalogTests.All_MetricsHaveValidProperties**
  - Summary: When the platform metric catalog is enumerated, then each metric has required metadata populated.
  - Intent: Ensure metric definitions have valid names, units, descriptions, tags, and aggregation kinds.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L132](tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L132)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.PlatformMetricCatalogTests.All_ReturnsNonEmptyList**
  - Summary: When the platform metric catalog is enumerated, then it returns a non-empty list.
  - Intent: Ensure the catalog exposes at least one metric.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L36](tests/Incursa.Platform.Tests/PlatformMetricCatalogTests.cs#L36)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.RoundRobinSelectionStrategyTests.Reset_ResetsToFirstStore**
  - Summary: When Reset is called, then the next selection starts from the first store.
  - Intent: Validate that reset clears the round-robin cursor.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/RoundRobinSelectionStrategyTests.cs#L86](tests/Incursa.Platform.Tests/RoundRobinSelectionStrategyTests.cs#L86)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.RoundRobinSelectionStrategyTests.SelectNext_CyclesThroughStores**
  - Summary: When SelectNext is called repeatedly, then it cycles through stores in order and wraps around.
  - Intent: Ensure round-robin selection advances deterministically through the store list.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/RoundRobinSelectionStrategyTests.cs#L61](tests/Incursa.Platform.Tests/RoundRobinSelectionStrategyTests.cs#L61)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.RoundRobinSelectionStrategyTests.SelectNext_WithNoStores_ReturnsNull**
  - Summary: When SelectNext is called with no stores, then it returns null.
  - Intent: Verify the round-robin strategy handles empty inputs safely.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/RoundRobinSelectionStrategyTests.cs#L43](tests/Incursa.Platform.Tests/RoundRobinSelectionStrategyTests.cs#L43)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.SchedulerMetricsTests.WorkQueueMetrics_Should_Be_Registered**
  - Summary: When SchedulerMetrics is referenced, then all work-queue metric definitions are initialized.
  - Intent: Verify scheduler work-queue metrics are registered and available.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/SchedulerMetricsTests.cs#L24](tests/Incursa.Platform.Tests/SchedulerMetricsTests.cs#L24)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupCheckLiveHealthEndpointTests.LiveEndpoint_Returns503WhileStartupChecksRun**
  - Summary: When live Endpoint Returns503 While Startup Checks Run, then it behaves as expected.
  - Intent: Document expected behavior for live Endpoint Returns503 While Startup Checks Run.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupCheckLiveHealthEndpointTests.cs#L32](tests/Incursa.Platform.Tests/StartupCheckLiveHealthEndpointTests.cs#L32)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupCheckRunnerHostedServiceTests.StartAsync_CriticalFailureStopsFurtherChecks**
  - Summary: When start Async Critical Failure Stops Further Checks, then it behaves as expected.
  - Intent: Document expected behavior for start Async Critical Failure Stops Further Checks.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L78](tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L78)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupCheckRunnerHostedServiceTests.StartAsync_ExecutesChecksInOrder**
  - Summary: When start Async Executes Checks In Order, then it behaves as expected.
  - Intent: Document expected behavior for start Async Executes Checks In Order.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L28](tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L28)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupCheckRunnerHostedServiceTests.StartAsync_NonCriticalFailureLogsAndContinues**
  - Summary: When start Async Non Critical Failure Logs And Continues, then it behaves as expected.
  - Intent: Document expected behavior for start Async Non Critical Failure Logs And Continues.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L103](tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L103)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupCheckRunnerHostedServiceTests.StartAsync_ThrowsWhenDuplicateNames**
  - Summary: When start Async Throws When Duplicate Names, then it behaves as expected.
  - Intent: Document expected behavior for start Async Throws When Duplicate Names.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L54](tests/Incursa.Platform.Tests/StartupCheckRunnerHostedServiceTests.cs#L54)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupCheckValidatorTests.ValidateUniqueNames_ThrowsOnDuplicates**
  - Summary: When validate Unique Names Throws On Duplicates, then it behaves as expected.
  - Intent: Document expected behavior for validate Unique Names Throws On Duplicates.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupCheckValidatorTests.cs#L41](tests/Incursa.Platform.Tests/StartupCheckValidatorTests.cs#L41)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupCheckValidatorTests.Validate_ThrowsWhenNameMissing**
  - Summary: When validate Throws When Name Missing, then it behaves as expected.
  - Intent: Document expected behavior for validate Throws When Name Missing.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupCheckValidatorTests.cs#L29](tests/Incursa.Platform.Tests/StartupCheckValidatorTests.cs#L29)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchHealthCheckTests.CheckHealthAsync_ReturnsHealthy_WhenLatchIsReady**
  - Summary: When check Health Async Returns Healthy When Latch Is Ready, then it behaves as expected.
  - Intent: Document expected behavior for check Health Async Returns Healthy When Latch Is Ready.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchHealthCheckTests.cs#L28](tests/Incursa.Platform.Tests/StartupLatchHealthCheckTests.cs#L28)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchHealthCheckTests.CheckHealthAsync_ReturnsUnhealthy_WhenLatchIsNotReady**
  - Summary: When check Health Async Returns Unhealthy When Latch Is Not Ready, then it behaves as expected.
  - Intent: Document expected behavior for check Health Async Returns Unhealthy When Latch Is Not Ready.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchHealthCheckTests.cs#L46](tests/Incursa.Platform.Tests/StartupLatchHealthCheckTests.cs#L46)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchLiveHealthEndpointTests.LiveEndpoint_Returns503UntilStartupCompletes**
  - Summary: When live Endpoint Returns503 Until Startup Completes, then it behaves as expected.
  - Intent: Document expected behavior for live Endpoint Returns503 Until Startup Completes.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchLiveHealthEndpointTests.cs#L31](tests/Incursa.Platform.Tests/StartupLatchLiveHealthEndpointTests.cs#L31)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchTests.Concurrency_SanityCheck**
  - Summary: When concurrency Sanity Check, then it behaves as expected.
  - Intent: Document expected behavior for concurrency Sanity Check.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchTests.cs#L104](tests/Incursa.Platform.Tests/StartupLatchTests.cs#L104)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchTests.DisposingTwice_IsSafe**
  - Summary: When disposing Twice Is Safe, then it behaves as expected.
  - Intent: Document expected behavior for disposing Twice Is Safe.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchTests.cs#L88](tests/Incursa.Platform.Tests/StartupLatchTests.cs#L88)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchTests.IsReady_BecomesFalseAfterRegister**
  - Summary: When is Ready Becomes False After Register, then it behaves as expected.
  - Intent: Document expected behavior for is Ready Becomes False After Register.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchTests.cs#L38](tests/Incursa.Platform.Tests/StartupLatchTests.cs#L38)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchTests.IsReady_BecomesTrueAfterDispose**
  - Summary: When is Ready Becomes True After Dispose, then it behaves as expected.
  - Intent: Document expected behavior for is Ready Becomes True After Dispose.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchTests.cs#L52](tests/Incursa.Platform.Tests/StartupLatchTests.cs#L52)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchTests.IsReady_IsTrueInitially**
  - Summary: When is Ready Is True Initially, then it behaves as expected.
  - Intent: Document expected behavior for is Ready Is True Initially.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchTests.cs#L26](tests/Incursa.Platform.Tests/StartupLatchTests.cs#L26)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.StartupLatchTests.MultipleSteps_AreRequiredBeforeReady**
  - Summary: When multiple Steps Are Required Before Ready, then it behaves as expected.
  - Intent: Document expected behavior for multiple Steps Are Required Before Ready.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/StartupLatchTests.cs#L67](tests/Incursa.Platform.Tests/StartupLatchTests.cs#L67)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.TimeAbstractionTests.FakeTimeProvider_CanBeUsedForTesting**
  - Summary: When FakeTimeProvider is advanced, then GetUtcNow reflects the new time.
  - Intent: Demonstrate deterministic time control with FakeTimeProvider.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L99](tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L99)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.TimeAbstractionTests.MonoDeadline_Expired_ReturnsFalseWhenNotReached**
  - Summary: When a deadline is in the future, then Expired returns false.
  - Intent: Verify MonoDeadline reports not expired before the deadline.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L63](tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L63)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.TimeAbstractionTests.MonoDeadline_Expired_ReturnsTrueWhenReached**
  - Summary: When a deadline is in the past, then Expired returns true.
  - Intent: Verify MonoDeadline reports expired once the deadline is reached.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L81](tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L81)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.TimeAbstractionTests.MonoDeadline_WorksWithFakeMonotonicClock**
  - Summary: When a fake monotonic clock advances past a deadline, then Expired flips to true.
  - Intent: Verify MonoDeadline works with a controllable monotonic clock.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L119](tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L119)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.TimeAbstractionTests.MonotonicClock_Seconds_ReturnsPositiveValue**
  - Summary: When MonotonicClock seconds are read, then the value is positive.
  - Intent: Ensure the monotonic clock exposes a positive elapsed seconds value.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L46](tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L46)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.TimeAbstractionTests.MonotonicClock_Ticks_ReturnsIncreasingValues**
  - Summary: When MonotonicClock ticks are read twice, then the second value is not less than the first.
  - Intent: Verify monotonic ticks do not move backwards.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L28](tests/Incursa.Platform.Tests/TimeAbstractionTests.cs#L28)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.WatchdogServiceTests.GetSnapshot_ReturnsInitialState**
  - Summary: When a new WatchdogService is created, then its snapshot is empty and timestamps equal the initial time.
  - Intent: Verify the watchdog snapshot starts with no alerts.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L31](tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L31)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.WatchdogServiceTests.WatchdogHealthCheck_ReturnsHealthy_WhenNoAlertsAsync**
  - Summary: When no alerts are present, then the watchdog health check reports Healthy.
  - Intent: Validate health check status reflects an alert-free snapshot.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L190](tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L190)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.WatchdogServiceTests.WatchdogService_DetectsOverdueJobs**
  - Summary: When overdue jobs are reported by the scheduler state, then the watchdog emits an overdue-job alert.
  - Intent: Verify job-overdue detection triggers alert sinks.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L127](tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L127)
- **Incursa.Platform.Tests:Incursa.Platform.Tests.WatchdogServiceTests.WatchdogService_EmitsHeartbeat**
  - Summary: When the heartbeat period elapses, then the watchdog emits a heartbeat to sinks.
  - Intent: Ensure heartbeat scheduling triggers sink callbacks.
  - Tags: (none)
  - Source: [tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L66](tests/Incursa.Platform.Tests/WatchdogServiceTests.cs#L66)
